<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                template="../../../resources/templates/template.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://xmlns.jcp.org/jsf/core">
    <ui:define name="navigaion_content">
        <li class="header">MAIN NAVIGATION</li>
        <li>
            <a href="../fcmsDashBoardnew.xhtml"><i class="fa fa-fw fa-dashboard"></i> <span> Dashboard</span><i class="fa fa-angle-double-left pull-right"></i></a>
        </li>
        <li>
            <a href="BondLibor.xhtml"><i class="fa fa-circle-o"></i>Bond Libor </a>
        </li>    
        <li>
            <a href="BondLocal.xhtml"><i class="fa fa-circle-o"></i>Bond Local </a>
        </li>
        <li>
            <a href="LocalRepayment.xhtml"><i class="fa fa-circle-o"></i>Bond Local Repayment </a>
        </li>
        <li>
            <a href="BondCoupon.xhtml"><i class="fa fa-circle-o"></i>Bond Coupon </a>
        </li>
        <li>
            <a href="BondCouponSchedule.xhtml"><i class="fa fa-circle-o"></i>Bond Coupon Schedule </a>
        </li>
    </ui:define>
    <ui:define name="contents">   
        <h:form id="frmToolbar"> 
            <p:toolbar style="background-color:white;border-color: white">
                <f:facet name="right">
                    <p:commandButton id="btnIcone" action="#{bondForeignController.createNewAdditionalAmount()}" 
                                     icon="#{bondForeignController.icone}" validateClient="true" style="background-color: white;border-color: white"
                                     process="@this" update="@this,:frmRegisterUI,:frmMainUI,:frmToolbar,:formgroupreport"
                                     title="#{bondForeignController.createOrSearchBundle}" />
                    <span class="ui-separator">
                        <span class="ui-icon ui-icon-grip-dotted-vertical" />
                    </span> 
                    <p:commandButton id="btnIcone1" action="#{bondForeignController.searchBondgroup()}"
                                     validateClient="true" style="background-color: white;border-color: white" icon="ui-icon-report"
                                     process="@this" update="@this,:frmRegisterUI,:frmMainUI,:frmToolbar,:formgroupreport" title="Report"/>                   
                    <span class="ui-separator">
                        <span class="ui-icon ui-icon-grip-dotted-vertical" />
                    </span>
                    <a href="BondForeign.xhtml"><i class="fa fa-fw fa-refresh" title="Refresh"></i></a>
                    <span class="ui-separator">
                        <span class="ui-icon ui-icon-grip-dotted-vertical" />
                    </span>
                    <a href="../../fcms/fcmsDashBoardnew.xhtml"><i class="fa fa-fw fa-dashboard" title="Dashboard"></i>  </a>
                    <span class="ui-separator" >
                        <span class="ui-icon ui-icon-grip-dotted-vertical" />
                    </span> 
                </f:facet>
            </p:toolbar>
        </h:form>
        <h:form id="frmMainUI">
            <h:panelGroup style="border: white; background-color: transparent" id="mainUI" rendered="#{bondForeignController.renderPnlManPage}">
                <div class="box box-primary">
                    <div class="box-header with-border">
                        <h3 class="box-title">#{FCMS.Bond_Foreign_Search}</h3>
                    </div>
                    <div class="box-body">
                        <div class="col-md-12">
                            <div class="col-md-6">
                                <div class="col-md-12 textBoxMargin6px">
                                    <div class="form-group form-horizontal">
                                        <h:outputLabel for="searchId" class="control-label col-sm-4" value="#{FCMS.Serial_Number}: "></h:outputLabel> 
                                        <div class="col-sm-8">
                                            <p:inputText id="searchId"  required="false" value="#{bondForeignController.bondForeign.serialNo}"
                                                         class="form-control"  style="width: 100%"     >
                                                <p:ajax event="select" process="@this" update="@this"/>
                                            </p:inputText>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12 textBoxMargin6px">
                                    <div class="form-group form-horizontal">
                                        <h:outputLabel for="searchName" class="control-label col-sm-4" value="#{FCMS.Name}: "></h:outputLabel> 
                                        <div class="col-sm-8">
                                            <p:autoComplete id="searchName"  emptyMessage="no data found"   style="width: 100%"                                              
                                                            value="#{bondForeignController.bondForeign.buyerFullName}"
                                                            completeMethod="#{bondForeignController.searchBybuyerName}" 
                                                            var="nameinfo" itemValue="#{nameinfo.buyerFullName}" itemLabel="#{nameinfo}"  >
                                                <p:ajax  event="itemSelect" listener="#{bondForeignController.getByBuyersNames}" 
                                                         process="searchName" update="@this"></p:ajax>  
                                                <p:column headerText="BNameuyer's Name"  >
                                                    <h:outputText value="#{nameinfo.buyerFullName}" />
                                                </p:column>
                                                <p:column  headerText="#{FCMS.Serial_Number}">
                                                    <h:outputText value="#{nameinfo.serialNo}" />
                                                </p:column>
                                            </p:autoComplete> 
                                            <p:message for="searchName" display="icon"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12 textBoxMargin6px">
                                    <div class="form-group form-horizontal">
                                        <h:outputLabel id="FindInfo" class="control-label col-sm-4"/>
                                        <div class="col-sm-8">
                                            <p:commandButton id="btnSearch" value="#{FCMS.Find}" class="btn btn-primary" 
                                                             process="@this" 
                                                             action="#{bondForeignController.search()}" 
                                                             update="@this,tblLocInfoDetail,tblLocInfoPrint"/>
                                        </div>
                                    </div> 
                                </div>  
                            </div>
                            <div class = "col-md-6">
                                <div class="col-md-12 textBoxMargin6px">
                                    <div class="form-group  form-horizontal">
                                        <h:outputLabel for="searchCurrency" class="control-label col-sm-4" value="#{FCMS.Currency}: "></h:outputLabel> 
                                        <div class="col-sm-8">
                                            <p:selectOneMenu id="searchCurrency"  value="#{bondForeignController.fmsLuCurrency}" style= "width: 100%"
                                                             converter="entConverter"
                                                             valueChangeListener="#{bondForeignController.handleSelectCurrency}">
                                                <f:selectItems  value="#{bondForeignController.currencyList}"  />
                                                <p:ajax event="change" process="searchCurrency" update="searchCurrency" />
                                                <p:message for="searchCurrency" display="icon"/>
                                            </p:selectOneMenu>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12 textBoxMargin6px">
                                    <div class="form-group form-horizontal">
                                        <h:outputLabel for="txtAmount" class="control-label col-sm-4" value=" #{FCMS.Principal_Amount} : "></h:outputLabel>   
                                        <div class="col-sm-8">
                                            <p:inputText id="txtAmount" value="#{bondForeignController.bondForeign.principalamount}"  
                                                         class="form-control"  style="width: 100%" validator="#{validatorManagedBean.Double}" converterMessage="Value must be a Number">
                                                <p:ajax event="select" process="@this" update="@this"/>
                                            </p:inputText>  
                                            <p:message for="txtAmount" display="icon"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row"> 
                            <div class="col-md-12"> 
                                <p:panel id="pnldtabel" style="border: white;"> 
                                    <div class="panel-body">
                                        <div class="form-horizontal col-sm-12">
                                            <p:dataTable id="tblLocInfoDetail" 
                                                         value="#{bondForeignController.bondForeigns}"
                                                         style="font-size: 11px;"  
                                                         rows="10"             
                                                         paginator="true" 
                                                         paginatorPosition="bottom" 
                                                         rowsPerPageTemplate="5,10,15"
                                                         resizableColumns="true"
                                                         rowIndexVar="numbers"  
                                                         var="addInfo"
                                                         selection="#{bondForeignController.bondForeignselectNew}"
                                                         selectionMode="single"
                                                         sortBy="#{addInfo.serialNo}"
                                                         rowKey="#{addInfo.serialNo}"> 
                                                <p:ajax event="rowSelect" listener="#{bondForeignController.bondForeigninfo}"
                                                        process="@this" update="@(form)" />
                                                <p:column  style="width:60px">
                                                    <f:facet name="header"  >
                                                        <h:outputText value="#{FCMS.No}" />
                                                    </f:facet>      
                                                    <h:outputText value="#{numbers+1}"/>          
                                                </p:column>                                       
                                                <p:column >
                                                    <f:facet name="header">
                                                        <h:outputText value="#{FCMS.Serial_Number}"/>
                                                    </f:facet>
                                                    <h:outputText value="#{addInfo.serialNo}" />
                                                </p:column>  
                                                <p:column rendered="false" >
                                                    <f:facet name="header">
                                                        <h:outputText value="#{FCMS.Country_Issued}"/>
                                                    </f:facet>
                                                    <h:outputText value="#{addInfo.countryBondIssued}" />
                                                </p:column>
                                                <p:column >
                                                    <f:facet name="header">
                                                        <h:outputText value="#{FCMS.Principal_Amount}"/>
                                                    </f:facet>
                                                    <h:outputText value="#{addInfo.principalamount}" converter="#{bondForeignController.numberConverter}"/>
                                                </p:column>
                                                <p:column rendered="true" >
                                                    <f:facet name="header">
                                                        <h:outputText value="#{FCMS.Full_Name}"/>
                                                    </f:facet>
                                                    <h:outputText value="#{addInfo.buyerFullName}" />
                                                </p:column>
                                                <p:column rendered="true" >
                                                    <f:facet name="header">
                                                        <h:outputText value="#{FCMS.Bond_Maturity}"/>
                                                    </f:facet>
                                                    <h:outputText value="#{addInfo.bondValueYear}" />
                                                </p:column>
                                                <p:column>
                                                    <f:facet name="header">
                                                        <h:outputText value="#{FCMS.Interest_Margin}" />
                                                    </f:facet>
                                                    <h:outputText value="#{addInfo.interestBearing}" converter="#{bondForeignController.numberConverter}"/>
                                                </p:column>
                                                <p:column >
                                                    <f:facet name="header">
                                                        <h:outputText value="#{FCMS.Bond_Currency}"/>
                                                    </f:facet>
                                                    <h:outputText value="#{addInfo.fmsLuCurrency}" />
                                                </p:column>
                                                <p:column >
                                                    <f:facet name="header">
                                                        <h:outputText value="#{FCMS.Issued_Date}"/>
                                                    </f:facet>
                                                    <h:outputText value="#{addInfo.applicationDate}" >
                                                        <f:convertDateTime pattern="dd/MMM/yyyy"/>
                                                    </h:outputText>
                                                </p:column>
                                                <p:column >
                                                    <f:facet name="header">
                                                        <h:outputText value="#{FCMS.Status}"/>
                                                    </f:facet>
                                                    <h:outputText value="#{addInfo.changedStatus}" />
                                                </p:column>
                                            </p:dataTable>  
                                        </div>
                                    </div>    
                                </p:panel>
                            </div>
                        </div>
                    </div>
                </div>              
            </h:panelGroup>
            <p:panel id="pnlPrint" class="visible-print" style="border: 0">
                <div id="wrapper">
                    <div class="container">
                        <div class="row">
                            <div class="col-xs-11">


                                <div class="col-xs-12 text-center">
                                    <h3><b> የኢትዮጵያ ኤሌክትሪክ ኃይል</b></h3>
                                    <h4><b>ETHIOPIAN ELECTRIC POWER</b> </h4>
                                    <small><b>Tel:-</b>011-551 32 88&#32;&#32; <b>FAX:-</b>011-551 29 38&#32;&#32; <b>P.O.Box:-</b> 3375</small>
                                </div>
                                <div class="col-xs-12 text-center"></div>
                            </div>
                            <div class="col-xs-8">
                                <div class="col-xs-12 text-center">
                                    <h4><b> የወጪ  ማዘዣና ደረሰኝ</b></h4>
                                    <h5><u><b>principal and Interest Due For The Great Ethiopian Renaissance Dam Bond </b></u></h5></div>
                            </div> 
                        </div>
                        <!-- / end client details section -->
                        <div class="row">
                            <div class="form-horizontal  col-sm-12">                            

                                <p:dataTable id="tblLocInfoPrint" 
                                             value="#{bondForeignController.bondForeignAddDataModel}"
                                             style="font-size: 11px;"  
                                             rows="10"             
                                             paginator="true" 
                                             paginatorPosition="bottom" 
                                             rowsPerPageTemplate="5,10,15"
                                             resizableColumns="true"
                                             rowIndexVar="numbers"  
                                             var="addInfo"
                                             selection="#{bondForeignController.bondForeignselect}"
                                             selectionMode="single"
                                             rowKey="#{addInfo.serialNo}"    >  
                                    <p:ajax event="rowSelect" listener="#{bondForeignController.bondForeigninfo}"
                                            process="@this"
                                            update="@(form)" />

                                    <p:column  style="width:60px">
                                        <f:facet name="header"  >
                                            <h:outputText value="No" />
                                        </f:facet>      
                                        <h:outputText value="#{numbers+1}"/>          
                                    </p:column>    
                                    <p:column >
                                        <f:facet name="header">
                                            <h:outputText value="Serial Number"/>
                                        </f:facet>
                                        <h:outputText value="#{addInfo.serialNo}" />
                                    </p:column>  
                                    <p:column >
                                        <f:facet name="header">
                                            <h:outputText value="Bond Name"/>
                                        </f:facet>
                                        <h:outputText value="#{addInfo.bondName}" />
                                    </p:column> 
                                    <p:column rendered="false" >
                                        <f:facet name="header">
                                            <h:outputText value="country Issued"/>
                                        </f:facet>
                                        <h:outputText value="#{addInfo.countryBondIssued}" />
                                    </p:column>
                                    <p:column >
                                        <f:facet name="header">
                                            <h:outputText value="Principal Amount"/>
                                        </f:facet>
                                        <h:outputText value="#{addInfo.principalamount}" converter="#{bondForeignController.numberConverter}"/>
                                    </p:column>
                                    <p:column rendered="true">
                                        <f:facet name="header">
                                            <h:outputText value="Full Name"/>
                                        </f:facet>
                                        <h:outputText value="#{addInfo.buyerFullName}" />
                                    </p:column>
                                    <p:column rendered="true" >
                                        <f:facet name="header">
                                            <h:outputText value="Bond Maturity"/>
                                        </f:facet>
                                        <h:outputText value="#{addInfo.bondValueYear}" />
                                    </p:column>
                                    <p:column >
                                        <f:facet name="header">
                                            <h:outputText value="Interest "/>
                                        </f:facet>
                                        <h:outputText value="#{addInfo.interest}" converter="#{bondForeignController.numberConverter}" />
                                    </p:column>
                                    <p:column >
                                        <f:facet name="header">
                                            <h:outputText value="Bond Currency"/>
                                        </f:facet>
                                        <h:outputText value="#{addInfo.fmsLuCurrency}" />
                                    </p:column>
                                    <p:column >
                                        <f:facet name="header">
                                            <h:outputText value="Issued Date"/>
                                        </f:facet>
                                        <h:outputText value="#{addInfo.applicationDate}" />
                                    </p:column>
                                </p:dataTable>  
                            </div>                                          
                        </div> 
                        <div class="row" >
                            <div class="col-xs-6">
                                <div class="panel panel-info" style="border: 0">
                                    <div class="panel-body">
                                        <p>Prepared by:</p>
                                        <p>Signature__________________</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-6" >
                                <div class="span7">
                                    <div class="panel panel-info" style="border: 0" >
                                        <div class="panel-body" >
                                            <p>Checked By: </p>
                                            <p>Signature__________________</p>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                        <p>Distribution:- Original to Customer &#32;&#32;&#32;&#32; 1<sup>st</sup> Copy to Accounts&#32;&#32;&#32;&#32;2<sup>nd</sup> Copy Pad :-</p>
                    </div>
                </div>
            </p:panel>
        </h:form>     
        <h:form id="formgroupreport">
            <h:panelGroup style="border: white; background-color: transparent" id="panelgroupreport" rendered="#{bondForeignController.panelgroupreport}">
                <div class="box box-primary">
                    <div class="box-header with-border">
                        <h3 class="box-title">Foreign Bond Issued Report Search</h3>
                    </div>
                    <div class="box-body">
                        <div class="col-md-12">
                            <div class="col-md-6">
                                <div class="col-md-12 textBoxMargin6px">
                                    <div class="form-group form-horizontal">
                                        <div class="col-md-12">
                                            <div class="form-group required form-horizontal textBoxMargin6px">
                                                <h:outputLabel class="control-label col-sm-4" value="#{FCMS.Country_Name}: "/>
                                                <div class="col-sm-8">
                                                    <p:selectOneMenu id="txtCountryName" value="#{bondForeignController.luCountry.id}" required="true" 
                                                                     converter="entConverter" filterMatchMode="contains" filter="true" style="width: 100%"> 
                                                        <f:selectItem itemLabel="--- Select One ---" itemValue="" />
                                                        <f:selectItems value="#{bondForeignController.comLuCountriesList}" 
                                                                       var="comCountryList" itemLabel="#{comCountryList.country}" 
                                                                       itemValue="#{comCountryList.id}"/>
                                                        <p:ajax process="@this" update="@this" />
                                                    </p:selectOneMenu>
                                                    <p:message for="txtCountryName" display="icon"/>
                                                </div>
                                            </div>
                                        </div> 
                                    </div>
                                </div>
                                <div class="col-md-12 textBoxMargin6px">
                                    <div class="form-group required form-horizontal">
                                        <h:outputLabel for="txtFromDate" class="control-label col-sm-4" value="#{FCMS.From_Date}: "></h:outputLabel> 
                                        <div class="col-sm-8">
                                            <p:calendar id="txtFromDate" pattern="yyyy/MM/dd" title="2017/04/19" placeholder="dd/mm/yyyy"
                                                        value="#{bondForeignController.fromIssueDate}" required="true"
                                                        requiredMessage=" date must be like 2017/04/19" converterMessage="Value must be in Date format"/>
                                            <p:message for="txtFromDate" display="icon"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12 textBoxMargin6px">
                                    <div class="form-group required form-horizontal">
                                        <h:outputLabel for="txToDate" class="control-label col-sm-4" value="#{FCMS.To_Date}: "></h:outputLabel> 
                                        <div class="col-sm-8">
                                            <p:calendar id="txToDate" pattern="yyyy/MM/dd" title="2017/04/19" placeholder="dd/mm/yyyy"
                                                        value="#{bondForeignController.toIssueDate}" required="true"
                                                        requiredMessage=" date must be like 2017/04/19" converterMessage="Value must be in Date format"/>
                                            <p:message for="txToDate" display="icon"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12 textBoxMargin6px">
                                    <div class="form-group form-horizontal">
                                        <h:outputLabel id="FindInfo" class="control-label col-sm-4"/>
                                        <div class="col-sm-8">
                                            <p:commandButton id="btnSearch" value="Find" class="btn btn-primary" 
                                                             process="@this,txtFromDate,txToDate" update="@this,tblgroupreport,:frmMainUI:tblLocInfoPrint"
                                                             action="#{bondForeignController.getByCountryId()}"/>
                                        </div>
                                    </div> 
                                </div>                                  
                            </div>                                                         
                        </div>                                                                   
                        <div class="row"> 
                            <div class="col-md-12" >
                                <p:panel id="pnldtabelgroupreport" style="border: white;"> 
                                    <div class="panel-body">
                                        <div class="form-horizontal col-sm-12">
                                            <p:dataTable id="tblgroupreport" 
                                                         value="#{bondForeignController.bondForeignGroupDataModel}"
                                                         var="addInfo" 
                                                         style="text-align: left"
                                                         rows="10"             
                                                         paginator="true" 
                                                         paginatorPosition="bottom"
                                                         rowsPerPageTemplate="5,10,15"
                                                         resizableColumns="true"
                                                         rowIndexVar="numbers" >
                                                <p:column >
                                                    <f:facet name="header">
                                                        <h:outputText value="#{FCMS.Serial_Number}"/>
                                                    </f:facet>
                                                    <h:outputText value="#{addInfo.serialNo}" />
                                                </p:column>  
                                                <p:column  style="text-align: left">
                                                    <f:facet name="header">
                                                        <h:outputText value="#{FCMS.Country_Issued}"/>
                                                    </f:facet>
                                                    <h:outputText value="#{addInfo.countryBondIssued}" />
                                                </p:column>
                                                <p:column  style="text-align: left">
                                                    <f:facet name="header">
                                                        <h:outputText value="#{FCMS.Issued_Date}"/>
                                                    </f:facet>
                                                    <h:outputText value="#{addInfo.applicationDate}" />
                                                </p:column>
                                                <p:column style="text-align: left">
                                                    <f:facet name="header">
                                                        <h:outputText value="#{FCMS.Principal_Amount}"/>
                                                    </f:facet>
                                                    <h:outputText value="#{addInfo.principalamount}" converter="#{bondForeignController.numberConverter}" />  
                                                </p:column>                                               
                                            </p:dataTable>
                                        </div>
                                    </div>    
                                </p:panel>
                                <div class="col-md-12">
                                    <div class="col-md-6">
                                        <div class="col-md-12 textBoxMargin6px">                                                                
                                            <div class="form-group form-horizontal">
                                                <h:outputLabel id="lblbuttonaSave" class="control-label col-sm-4"/>
                                                <div class="col-sm-3">
                                                    <p:commandButton id="btnPrint" value="Print" class="btn  btn-block btn-primary col-lg-4" 
                                                                     >
                                                        <p:printer target=":frmMainUI:pnlPrint" />
                                                    </p:commandButton> 
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>           
            </h:panelGroup>
        </h:form>
        <!-- Registration Form-->
        <h:form id="frmRegisterUI">
            <p:growl id="growl" showDetail="true" autoUpdate="true" severity="information,fatal"/>
            <h:panelGroup style="border: 0px; background-color: transparent" id="registerUI" 
                          rendered="#{bondForeignController.renderPnlCreateAdditional}">
                <div class="box box-primary">
                    <div class="box-header with-border">
                        <h3 class="box-title">#{FCMS.Bond_Foreign_Registration} </h3>
                    </div>
                    <div class="box-body">
                        <div class="col-md-12">
                            <div class="col-md-6">
                                <div class="col-md-12 textBoxMargin6px">
                                    <div class="form-group required form-horizontal">
                                        <h:outputLabel for="txtSerial" class="control-label col-sm-4" value="#{FCMS.Serial_Number}: "></h:outputLabel> 
                                        <div class="col-sm-8">
                                            <p:inputText id="txtSerial"   value="#{bondForeignController.bondForeign.serialNo}"
                                                          style="width: 100%"
                                                         required="true" requiredMessage="Serial No is required " />
                                            <p:message for="txtSerial" display="icon"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12 textBoxMargin6px">
                                    <div class="form-group required form-horizontal">
                                        <h:outputLabel for="txtType"  class="control-label col-sm-4" value="#{FCMS.Bond_Type}: "></h:outputLabel> 
                                        <div class="col-sm-8">

                                            <p:selectOneMenu id="txtType"   style="width: 100%" value="#{bondForeignController.bondForeign.bondName}"
                                                             converter="entConverter"  required="true" requiredMessage="Bond Type is required, please select one " >
                                                <f:selectItems  value="#{bondForeignController.bondTypeList}"  />
                                            </p:selectOneMenu>
                                            <p:message for="txtType" display="icon" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12 textBoxMargin6px">
                                    <div class="form-group required form-horizontal">
                                        <h:outputLabel for="txtTypecuntry" class="control-label col-sm-4" value="#{FCMS.Country_Issued} : "></h:outputLabel> 
                                        <div class="col-sm-8">
                                            <p:selectOneMenu id="txtTypecuntry"  value="#{bondForeignController.bondForeign.countryBondIssued}"  style="width: 100%"
                                                             converter="entConverter"  required="true"   requiredMessage=" This field is required, please select one " >
                                                <f:selectItems  value="#{bondForeignController.getCunteryList()}"  />
                                            </p:selectOneMenu>
                                            <p:message for="txtTypecuntry" display="icon" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12 textBoxMargin6px">
                                    <div class="form-group required form-horizontal">
                                        <h:outputLabel for="txtCurrency" class="control-label col-sm-4" value="#{FCMS.Bond_Currency}: "></h:outputLabel>   
                                        <div class="col-sm-8">
                                            <p:selectOneMenu id="txtCurrency"  value="#{bondForeignController.fmsLuCurrency}"  style="width: 100%" 
                                                             converter="entConverter"  required="true" requiredMessage="This field is required, please select one" >
                                                <f:selectItems  value="#{bondForeignController.currencyList}"  />
                                            </p:selectOneMenu>
                                            <p:message for="txtCurrency" display="icon"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12 textBoxMargin6px">
                                    <div class="form-group required form-horizontal">
                                        <h:outputLabel for="txtAmount" class="control-label col-sm-4" value="#{FCMS.Principal_Amount}: "></h:outputLabel>   
                                        <div class="col-sm-8">
                                            <p:inputText id="txtAmount" value="#{bondForeignController.bondForeign.principalamount}"  
                                                         class="form-control"  style="width: 100%" validator="#{validatorManagedBean.Double}"
                                                         required="true" requiredMessage="Amount is required and must be number "
                                                         converterMessage="Amount must be anumber" 
                                                         validatorMessage="Amount must be anumber">
                                            </p:inputText>  
                                            <p:message for="txtAmount" display="icon"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12 textBoxMargin6px">
                                    <div class="form-group required form-horizontal">               
                                        <h:outputLabel for="txtbuyerFullName" class="control-label col-sm-4" value="#{FCMS.Bond_Buyer_Full_Name}: "></h:outputLabel>   
                                        <div class="col-sm-8">
                                            <p:inputText id="txtbuyerFullName" value="#{bondForeignController.bondForeign.buyerFullName}"  
                                                         class="form-control"  style="width: 100%" validator="#{validatorManagedBean.FullName}"
                                                         required="true"   requiredMessage="FullName is required and must be a-zA-Z "
                                                         converterMessage="Buyer Full Name must be a text" 
                                                         validatorMessage="Buyer Full Name must be a text" >
                                            </p:inputText>
                                            <p:message for="txtbuyerFullName" display="icon"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="col-md-12 textBoxMargin6px">
                                    <div class="form-group required form-horizontal">
                                        <h:outputLabel for="txtinterestBearing" class="control-label col-sm-4" value="#{FCMS.Interest_Margin}: "/>
                                        <div class="col-sm-5">
                                            <p:inputText id="txtinterestBearing" value="#{bondForeignController.bondForeign.interestBearing}" 
                                                         converter="#{bondForeignController.numberConverter}" validator="#{validatorManagedBean.Double}"
                                                         converterMessage="Interest Margin must be anumber" required="true" requiredMessage="This field is required and must be number" 
                                                         class="form-control" readonly="#{bondForeignController.isCheckedInterestFree}"> 
                                                <p:ajax process="@this" update="txtinterestBearing" listener="#{bondForeignController.InterestMarigin(event)}" 
                                                        event="change" />
                                            </p:inputText>  
                                            <p:message for="txtinterestBearing" display="icon"/>
                                        </div>
                                        <div class="col-sm-3">
                                            <p:selectBooleanCheckbox id="chkIsinterestFree" value="#{bondForeignController.isCheckedInterestFree}" 
                                                                     valueChangeListener="#{bondForeignController.onCheckInterestFreeEvent}">
                                                <p:ajax event="valueChange" process="@this" update="txtinterestBearing" />
                                            </p:selectBooleanCheckbox>
                                            <p:outputLabel for="chkIsinterestFree" value="#{FCMS.Interest_Free}" />
                                        </div>
                                        <div class="col-sm-3">
                                            <p:selectBooleanCheckbox id="chkIsLiborPlus" value="#{bondForeignController.isCheckedLiborPlus}" 
                                                                     valueChangeListener="#{bondForeignController.onCheckLiborPlusEvent}">
                                                <p:ajax event="valueChange" process="@this" update="txtinterestBearing" />
                                            </p:selectBooleanCheckbox>
                                            <p:outputLabel for="chkIsLiborPlus" value=" #{FCMS.Libor_Plus}" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="col-md-12 textBoxMargin6px">
                                    <div class="form-group required form-horizontal">
                                        <h:outputLabel for="txtMaturity" class="control-label col-sm-4" value="#{FCMS.Bond_Maturity}: "></h:outputLabel> 
                                        <div class="col-sm-8">
                                            <p:inputText id="txtMaturity"   value="#{bondForeignController.bondForeign.bondValueYear}" 
                                                         class="form-control"  style="width: 100%" valueChangeListener="#{bondForeignController.changeOnMaturity}"
                                                         required="true" requiredMessage="This field is required and must be number"
                                                         converterMessage="Bond Maturity must be anumber" 
                                                         validatorMessage="Bond Maturity must be anumber" validator="#{validatorManagedBean.Number}">
                                                <p:ajax event="keyup" update="txtmaturityDate" process="@this" />
                                            </p:inputText>
                                            <p:message for="txtMaturity" display="icon"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12 textBoxMargin6px">
                                    <div class="form-group required form-horizontal">
                                        <h:outputLabel for="txtIssuedDate" class="control-label col-sm-4" value="#{FCMS.Issued_Date}: "></h:outputLabel> 
                                        <div class="col-sm-8">
                                            <p:calendar id="txtIssuedDate" pattern="dd/MM/yyyy" placeholder="dd/mm/yyyy"
                                                        value="#{bondForeignController.bondForeign.applicationDate}"
                                                        valueChangeListener="#{bondForeignController.changeOnMaturityDate}"
                                                        required="true"  requiredMessage="This field is required Date format e.g 20/02/2018"
                                                        converterMessage="Issued Date must be a Date" >
                                                <p:ajax event="dateSelect" update="txtmaturityDate" process="@this"/>
                                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                                            </p:calendar>
                                            <p:message for="txtIssuedDate" display="icon"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12 textBoxMargin6px">
                                    <div class="form-group required form-horizontal">
                                        <h:outputLabel for="txtmaturityDate" class="control-label col-sm-4" value="#{FCMS.Bond_Maturity_Date}e: "></h:outputLabel> 
                                        <div class="col-sm-8">
                                            <p:calendar id="txtmaturityDate" pattern="dd/MM/yyyy" placeholder="dd/mm/yyyy"  showOn="none" autocomplete="off" readonly="true"
                                                        value="#{bondForeignController.bondForeign.bondMaturityDate}" converterMessage="Value must be in Date format"
                                                        required="true" requiredMessage="This field is required date must look like e.g 20/02/2018">
                                            </p:calendar>
                                            <p:message for="txtmaturityDate" display="icon"/>
                                        </div>
                                    </div>
                                </div> 
                                <div class="col-md-12 textBoxMargin6px">
                                    <div class="form-group required form-horizontal">
                                        <h:outputLabel for="txtRegisteredDate" class="control-label col-sm-4" value="#{FCMS.Value_Date}: "></h:outputLabel> 
                                        <div class="col-sm-8">
                                            <p:calendar id="txtRegisteredDate" pattern="dd/MM/yyyy" placeholder="dd/mm/yyyy"
                                                        value="#{bondForeignController.bondForeign.valueDate}" required="true" 
                                                        requiredMessage="This field is required date must look like e.g 2017/02/18" converterMessage="Issued Date must be a Date">
                                            </p:calendar>
                                            <p:message for="txtRegisteredDate" display="icon"/>
                                        </div>
                                    </div>
                                </div> 
                                <div class="col-md-12 textBoxMargin6px">
                                    <div class="form-group required form-horizontal">
                                        <h:outputLabel for="txtRefernceno"  class="control-label col-sm-4" value=" #{FCMS.Document_Reference_Number}: "></h:outputLabel> 
                                        <div class="col-sm-8">
                                            <p:inputText id="txtRefernceno"  value="#{bondForeignController.bondForeign.referenceNumber}" 
                                                         required="true" requiredMessage="This field ie required and it must be a text"
                                                         validatorMessage="Bond Maturity must be Alpha Numeric Text" validator="#{validatorManagedBean.AlphaNumericText}">
                                            </p:inputText>
                                            <p:message for="txtRefernceno" display="icon"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <h:panelGroup rendered="#{bondForeignController.renderPnlCreateAdditional}">
                            <div class="box-body">
                                <div class="col-sm-6">
                                    <div class="col-md-12 textBoxMargin6px">
                                        <div class="form-group form-horizontal"> 
                                            <div class="col-sm-4" >                                                              
                                            </div> 
                                            <div class="col-sm-3">
                                                <p:commandButton id="btnSave" class="btn btn-primary"
                                                                 action="#{bondForeignController.saveBondForeign()}"
                                                                 value="#{bondForeignController.saveUpdate}"
                                                                 process="@this,registerUI"  
                                                                 update=":frmRegisterUI"/>
                                            </div>
                                            <div class="col-sm-3">                                                              
                                            </div>  
                                            <div class="col-sm-3">
                                                <p:commandButton value="Terminate" rendered="#{bondForeignController.termnetdisable}"
                                                                 class="btn btn-primary" onclick="PF('confirmation').show()"/>
                                            </div>

                                            <div class="col-sm-4">
                                            </div>
                                            <div class="col-sm-3">
                                                <p:commandButton value="pay" rendered="#{bondForeignController.paydisable}"
                                                                 class="btn btn-primary" onclick="PF('confirm').show()"/>

                                            </div>

                                        </div>

                                    </div>
                                </div>
                            </div>
                        </h:panelGroup> 
                    </div>
                </div>               
            </h:panelGroup>
        </h:form>
        <h:form id="frmTerminationUI">
            <div class="col-md-6">
                <p:dialog id="digTerminate" 
                          header="Bond Termination" 
                          widgetVar="confirmation"                                              
                          showEffect="bounce"
                          position="center" modal="true" width="40%">
                    <div class="col-md-8 textBoxMargin6px">
                        <div class="form-group required form-horizontal">
                            <h:outputLabel for="txtRefernceno"  class="control-label col-sm-4" value="#{FCMS.Reference_NO}: "></h:outputLabel> 
                            <div class="col-sm-4">
                                <p:inputText id="txtRefernceno"  value="#{bondForeignController.bondForeign.referenceNumber}" 
                                             required="true" requiredMessage="value ie required"/>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-8 textBoxMargin6px">
                        <div class="form-group form-horizontal">

                            <h:outputLabel for="EndDate" class="control-label col-sm-4" value="Termination Date"></h:outputLabel>   
                            <div class="col-sm-4">
                                <p:calendar id="EndDate" pattern="yyyy/MM/dd" placeholder="dd/mm/yyyy" converterMessage="Value must be in Date format" 
                                            value="#{bondForeignController.bondForeign.lastRepaymentSchedule}" 
                                            required="true" requiredMessage="The  field is required date must look like e.g 2017/02/18"/>
                                <p:message for="EndDate" display="icon"/>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-8 textBoxMargin6px">
                        <div class="form-group form-horizontal">
                            <h:outputLabel for="txtamount" class="control-label col-sm-4" value="#{FCMS.Principal_Amount}"></h:outputLabel> 
                            <div class="col-sm-4">
                                <p:inputText id="txtamount"   value="#{bondForeignController.bondForeign.principalamount}"
                                             class="form-control"  style="width: 100%" readonly="true"
                                             title="TypeId" required="true" requiredMessage="The Balance field is required."
                                             converter="#{bondForeignController.numberConverter}"/>
                                <p:message for="txtamount" display="icon"/>
                            </div>
                        </div>
                    </div> 
                    <div class="col-md-12 textBoxMargin6px">
                        <div class="form-group form-horizontal">                                          
                            <br></br>
                            <div class="col-sm-8" style="left: 150px">
                                <p:commandButton value="Confirm"  class="btn  btn-block btn-primary col-sm-4" 
                                                 process=":frmTerminationUI,:frmRegisterUI"  style="width: 100px" 
                                                 action="#{bondForeignController.singleBondTerminater}" 
                                                 update=":frmTerminationUI,:frmRegisterUI,:frmMainUI,:frmToolbar,:formgroupreport,digTerminate" >
                                    <p:confirm header="Confirm" message="terminate the bond?" />
                                </p:commandButton>
                                <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                    <p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" icon="pi pi-check" />
                                    <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="pi pi-times" />
                                </p:confirmDialog> 
                            </div>
                        </div>
                    </div>
                </p:dialog>   
            </div> 
        </h:form>

        <h:form id="frmPaymentUI">
            <div class="col-md-6">
                <p:dialog id="digPayment" 
                          header="Bond Payment" 
                          widgetVar="confirm"                                              
                          showEffect="bounce"
                          position="center" 
                          modal="true" 
                          width="50%">

                    <h:panelGroup id="pnldialog" class="col-md-12">
                        <div class="col-md-12">
                            <div class="col-md-6">
                                <div class="col-md-12 textBoxMargin6px">
                                    <div class="form-group required form-horizontal">
                                        <h:outputLabel for="txtPaymDate" class="control-label col-sm-4" value="#{FCMS.Payment_Date}:"></h:outputLabel> 
                                        <div class="col-sm-8">
                                            <p:calendar id="txtPaymDate" pattern="yyyy/MM/dd" placeholder="dd/mm/yyyy" maxdate="today"
                                                        value="#{bondForeignController.bondForeign.paymentDate}"
                                                        required="true" requiredMessage=" field is required Date format e.g 2017/06/24"
                                                        converterMessage="Issued Date must be a Date"  >
                                                <p:ajax process="@this" update="txtPaymDate,txtnuofDays,txtInterest,txtTotalAmount" listener="#{bondForeignController.handlePayment}" 
                                                        event="dateSelect" />
                                            </p:calendar>
                                            <p:message for="txtPaymDate" display="icon"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12 textBoxMargin6px">
                                    <div class="form-group  form-horizontal">
                                        <h:outputLabel class="control-label col-sm-4" value="Number of Days:"></h:outputLabel> 
                                        <div class="col-sm-8">
                                            <p:inputText id="txtnuofDays"   value="#{bondForeignController.numberOfDays}" 
                                                         class="form-control"  style="width: 100%"
                                                         readonly="true" >                                                
                                            </p:inputText>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12 textBoxMargin6px">
                                    <div class="form-group form-horizontal">
                                        <h:outputLabel for="txtInterest" class="control-label col-sm-4" value="Interest: "></h:outputLabel> 
                                        <div class="col-sm-8">
                                            <p:inputText id="txtInterest"   value="#{bondForeignController.interest}"
                                                         class="form-control"  style="width: 100%" readonly="true"
                                                         converter="#{bondForeignController.numberConverter}"
                                                         title="TypeId" required="true" requiredMessage="The Balance field is required." />
                                            <p:message for="txtInterest" display="icon"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12 textBoxMargin6px">
                                    <div class="form-group form-horizontal">
                                        <h:outputLabel for="txtprincipalAmount"  class="control-label col-sm-4" value="#{FCMS.Principal_Amount}:"></h:outputLabel> 
                                        <div class="col-sm-8">
                                            <p:inputText id="txtprincipalAmount"  value="#{bondForeignController.bondForeign.principalamount}" 
                                                         converter="#{bondForeignController.numberConverter}" 
                                                         validator="#{validatorManagedBean.Money(context, component, value)}"
                                                         required="true" requiredMessage="value ie required" readonly="true" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12 textBoxMargin6px">
                                    <div class="form-group form-horizontal">
                                        <h:outputLabel for="txtTotalAmount"  class="control-label col-sm-4" value="#{FCMS.total}:"></h:outputLabel> 
                                        <div class="col-sm-8">
                                            <p:inputText id="txtTotalAmount"  value="#{bondForeignController.totalAmount}" 
                                                         converter="#{bondForeignController.numberConverter}" 
                                                         validator="#{validatorManagedBean.Money(context, component, value)}"
                                                         required="true" requiredMessage="value ie required" readonly="true"
                                                         />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12 textBoxMargin6px">
                                    <div class="form-group required form-horizontal">
                                        <h:outputLabel for="txtPaymentDate" class="control-label col-sm-4" value="payment Document Date:"></h:outputLabel> 
                                        <div class="col-sm-8">
                                            <p:calendar id="txtPaymentDate" pattern="yyyy/MM/dd" placeholder="dd/mm/yyyy"
                                                        value="#{bondForeignController.bondForeign.paymentDocumentDate}"
                                                        required="true" requiredMessage=" field is required Date format e.g 2017/06/24"
                                                        converterMessage="Issued Date must be a Date"  >
                                            </p:calendar>
                                            <p:message for="txtPaymentDate" display="icon"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12 textBoxMargin6px">
                                    <div class="form-group required form-horizontal">
                                        <h:outputLabel  class="control-label col-sm-4" value=" #{FCMS.Document_Reference_Number}:"></h:outputLabel> 
                                        <div class="col-sm-8">
                                            <p:inputText id="txtDocRef"  value="#{bondForeignController.bondForeign.paymentDocumentReference}" 
                                                         required="true" requiredMessage="value ie required"/>
                                            <p:message for="txtDocRef" display="icon"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12 textBoxMargin6px ">
                                    <div class="form-group form-horizontal">
                                        <h:outputLabel class="control-label col-sm-4" value="#{FCMS.Remark}:" />
                                        <div class="col-sm-8">
                                            <p:column headerText="Remark" >
                                                <h:inputTextarea id="txtRemark" value="#{bondForeignController.bondForeign.remark}"
                                                                 class="form-control"  style="width: 100%" > </h:inputTextarea> 
                                            </p:column> 
                                        </div>
                                    </div>
                                </div> 
                                <div class="col-md-12 textBoxMargin6px">
                                    <div class="form-group form-horizontal">
                                        <div class="col-sm-8" style="left: 100px">
                                            <br></br>
                                            <p:commandButton id="btnsavedialog" value="#{FCMS.save}" action="#{bondForeignController.makePaymetnt}" 
                                                             process="@this,pnldialog"  update="@this,pnldialog">
                                                <p:confirm header="Confirmation" message="Make Payment?" />
                                            </p:commandButton>

                                            <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                                <p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" icon="pi pi-check" />
                                                <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="pi pi-times" />
                                            </p:confirmDialog>  
                                        </div>
                                    </div>    
                                </div>
                            </div>
                        </div>
                    </h:panelGroup>
                </p:dialog>   
            </div>
        </h:form>
    </ui:define>
</ui:composition>
