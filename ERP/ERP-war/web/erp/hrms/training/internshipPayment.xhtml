<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    template="../../../resources/templates/template.xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:f="http://xmlns.jcp.org/jsf/core">
    <ui:define name="navigaion_content">     
        <li><a href="../hrmsDashboard.xhtml" title="Dashboard"><i class="fa  fa-fw fa-dashboard"></i> <span>Dashboard</span></a></li>
        <li><a href="maintainUniversity.xhtml"><i class="fa fa-circle-o"></i> <span>Maintain University</span></a></li>
        <li><a href="internshipStudentDetails.xhtml"><i class="fa fa-circle-o"></i> <span>Internship Student Details</span></a></li>
        <li><a href="internshipPlacement.xhtml"><i class="fa fa-circle-o"></i> <span>Internship Placement</span></a></li> 
        <li><a href="internshipStatus.xhtml"><i class="fa fa-circle-o"></i><span>Internship status</span></a> </li>
    </ui:define> 
    <ui:define name="contents">
        <h:form id="frmTop"> 
            <p:toolbar style="background-color:white;border-color: white">
                <f:facet name="right">
                    <p:commandButton id="btnNew" validateClient="true" action="#{hrInternPaymentController.newOrSearchPage()}"
                                     icon="#{hrInternPaymentController.icone}" style="background-color: white; border-color: white"
                                     title="#{hrInternPaymentController.createOrSearchBundle}"
                                     process="@this" update="@this,:frmPlacementStatus,:frmTop"/>
                    <span class="ui-separator">
                        <span class="ui-icon ui-icon-grip-dotted-vertical"/>
                    </span> 
                    <h:panelGroup id="pnlPlus"  rendered="#{hrInternPaymentController.btnNewRender}"> 
                        <p:commandButton validateClient="true" action="#{hrInternPaymentController.newButtonAction()}"
                                         icon="ui-icon-plus" style="background-color: white;border-color: white"  title="New record"
                                         process="@this" update=":frmPlacementStatus,:frmTop" />
                        <span class="ui-separator">
                            <span class="ui-icon ui-icon-grip-dotted-vertical"/>
                        </span>
                    </h:panelGroup> 
                    <a href="../../hrms/training/internshipPayment.xhtml"><i class="fa fa-fw fa-refresh"></i></a>
                    <span class="ui-separator">
                        <span class="ui-icon ui-icon-grip-dotted-vertical" />
                    </span>
                    <a href="../../hrms/hrmsDashboard.xhtml"><i class="fa fa-fw fa-dashboard"></i></a>
                    <span class="ui-separator" >
                        <span class="ui-icon ui-icon-grip-dotted-vertical" />
                    </span>
                    <a href="../../../HomePage.xhtml"><i class="fa fa-home" title="Home Page"></i></a>
                </f:facet>
            </p:toolbar>
        </h:form>  
        <h:form id="frmPlacementStatus">
            <p:growl id="growl2" showDetail="true" autoUpdate="true" severity="information,fatal"/>
            <h:panelGroup style="border: 0px; background-color: transparent" id="pnlDtSearch" rendered="#{hrInternPaymentController.renderPnlManPage}">
                <div class="row">
                    <div class="col-md-12">
                        <div class="box box-primary ">
                            <div class="box-header ">                                
                                <h2 class="box-title"><h:outputLabel value="#{hrInternPaymentController.headerTitle}"/></h2>
                            </div>
                            <div class="box-body ">
                                <div class="box-body ">
                                    <div class="col-md-12" >  
                                        <div class="col-md-12">
                                            <div class="col-md-6">
                                                <div class="form-horizontal col-md-12 textBoxMargin6px"> 
                                                    <h:outputLabel value="Reference Letter:" class="col-sm-4 control-label"/>
                                                    <div class="col-sm-8" >  
                                                        <p:selectOneMenu  id="drdsSemester" value="#{hrInternPaymentController.hrTdIspPayment.referenceLetter}"  
                                                                          style="width:100%;" valueChangeListener="#{hrInternPaymentController.findInternshipPayment}">
                                                            <f:selectItem itemLabel="--- Select ---" itemValue=""/>
                                                            <f:selectItems value="#{hrInternPaymentController.letterList}" var="liter" itemLabel="#{liter}" itemValue="#{liter}"/>
                                                            <p:ajax event="change" process="@this" update=":frmPlacementStatus:tblPaymentList"/>
                                                        </p:selectOneMenu>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </h:panelGroup>
            <h:panelGroup style="border: 0px; background-color: transparent" id="pnlSearch" rendered="#{hrInternPaymentController.renderPnlManPage}">
                <div class="row">
                    <div class="col-md-12">
                        <div class="box box-primary "> 
                            <div class="box-body ">
                                <div class="col-md-12" >  
                                    <div class="col-md-12" style="margn-top: 30px;">
                                        <p:dataTable id="tblPaymentList" value="#{hrInternPaymentController.paymentDataModel}"
                                                     var="stud" selectionMode="single" rowIndexVar="num"  class="dataTable" rows="10" rowsPerPageTemplate="5,10,15" paginator="true"
                                                     selection="#{hrInternPaymentController.hrTdIspPayment}" rowKey="#{stud.id}" paginatorPosition="bottom">
                                            <p:ajax event="rowSelect" process="@this" listener="#{hrInternPaymentController.populate}"
                                                    update=":frmPlacementStatus,:frmTop" />   
                                            <p:column style="width:80px;">
                                                <f:facet name="header">
                                                    <h:outputText value="No"/>
                                                </f:facet>
                                                <h:outputText value="#{num+1}"/> 
                                            </p:column>
                                            <p:column>
                                                <f:facet name="header">
                                                    <h:outputText value="Reference Letter"/>                                                        
                                                </f:facet>
                                                <h:outputText  value="#{stud.referenceLetter}"/>
                                            </p:column>
                                            <p:column>
                                                <f:facet name="header">
                                                    <h:outputText value="FRom Date"/>                                                        
                                                </f:facet>
                                                <h:outputText  value="#{stud.fromDate}"/>
                                            </p:column>
                                            <p:column>
                                                <f:facet name="header">
                                                    <h:outputText value="To Date"/>                                                        
                                                </f:facet>
                                                <h:outputText  value="#{stud.toDate}"/>
                                            </p:column>
                                            <p:column>
                                                <f:facet name="header">
                                                    <h:outputText value="Remark"/>
                                                </f:facet>
                                                <h:outputText value="#{stud.remark}"/>
                                            </p:column> 
                                        </p:dataTable>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </h:panelGroup>
            <h:panelGroup id="pnlplacementstatus" style="border: 0px; background-color: transparent" rendered="#{hrInternPaymentController.renderPnlCreateGatePass}">
                <div class="row">
                    <div class="col-md-12">
                        <div class="box box-primary with-border"> 
                            <div class="box-header with-border">
                                <h2 class="box-title" style="margin-left: 15px;">Internship Payment</h2>                       
                            </div>
                            <div class="box-body ">
                                <div class="box-body ">         
                                    <div class="nav-tabs-custom">
                                        <div class="tab-content" id="maintab">
                                            <div class="tab-pane active" id="tabPersonal"> 
                                                <h:panelGroup id="pnlMaster">
                                                    <section class="panel panel-info">
                                                        <section class="panel-body"> 
                                                            <div class="row">
                                                                <div class="col-md-12">   
                                                                    <div class="box-body">
                                                                        <div class="col-lg-6">
                                                                            <div class="form-group form-horizontal form-group required">
                                                                                <h:outputLabel  for="txtLetter" class="control-label col-sm-4" value="Reference Letter: "/>
                                                                                <div class="col-sm-8 textBoxMargin6px">
                                                                                    <p:inputText id="txtLetter"  class="form-control" value="#{hrInternPaymentController.hrTdIspPayment.referenceLetter}" 
                                                                                                 required="true" requiredMessage="Enter Refernce Letter" onchange="this.value = this.value.trim()"/>
                                                                                    <p:message for="txtLetter" display="icon"/>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-md-6">
                                                                            <div class="form-group form-horizontal form-group required">
                                                                                <h:outputLabel value="From Date: " class="col-md-4 control-label" />
                                                                                <div class="col-sm-8 textBoxMargin6px">
                                                                                    <p:inputText id="txtFdate" value="#{hrInternPaymentController.hrTdIspPayment.fromDate}"
                                                                                                 onclick="displayCalendar('frmPlacementStatus:txtFdate', 'frmPlacementStatus:txtFdate');"
                                                                                                 required="true" requiredMessage="Please Enter Date"  title="Date"
                                                                                                 validator="#{validatorManagedBean.Date}" validatorMessage="Please Enter Date Only"/>
                                                                                    <p:message for="txtFdate" display="icon"/>
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-group form-horizontal form-group required">
                                                                                <h:outputLabel value="To Date: " class="col-md-4 control-label" />
                                                                                <div class="col-sm-8 textBoxMargin6px">
                                                                                    <p:inputText id="txtLdate" value="#{hrInternPaymentController.hrTdIspPayment.toDate}"
                                                                                                 onclick="displayCalendar('frmPlacementStatus:txtLdate', 'frmPlacementStatus:txtLdate');"
                                                                                                 required="true" requiredMessage="Please Enter Date"  title="Date"
                                                                                                 validator="#{validatorManagedBean.Date}" validatorMessage="Please Enter Date Only"/>
                                                                                    <p:message for="txtLdate" display="icon"/>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </section> 
                                                    </section> 
                                                    <section class="panel panel-info">
                                                        <section class="panel-body"> 
                                                            <div class="col-md-6">
                                                                <div class="form-horizontal col-md-12 textBoxMargin6px">
                                                                    <h:outputLabel value="Year:" class="col-sm-4 control-label"/>                                               
                                                                    <div class="col-sm-8">
                                                                        <p:selectOneMenu id="txtyear" style="width:100%" value="#{hrInternPaymentController.hrTdIspStudents.year}"
                                                                                         valueChangeListener="#{hrInternPaymentController.findByYear}" converter="entConverter"
                                                                                         required="true" requiredMessage="Please Enter Year">
                                                                            <f:selectItem itemLabel="--- Select ---" itemValue=""/>
                                                                            <f:selectItems value="#{hrInternPaymentController.budgetYear}" var="yeara" itemLabel="#{yeara}" itemValue="#{yeara}"/>
                                                                            <p:ajax event="change" process="@this,txtyear" update="txtSemester"/>
                                                                            <p:message for="txtyear" display="icon"/>
                                                                        </p:selectOneMenu>
                                                                    </div>
                                                                </div> 
                                                                <div class="form-horizontal col-md-12 textBoxMargin6px"> 
                                                                    <h:outputLabel value="Semester:" class="col-sm-4 control-label"/>
                                                                    <div class="col-sm-8" >  
                                                                        <p:selectOneMenu  id="txtSemester" value="#{hrInternPaymentController.hrTdIspStudents}"   converter="entConverter"
                                                                                          style="width:100%;" valueChangeListener="#{hrInternPaymentController.semisiter_vcl}"
                                                                                          required="true" requiredMessage="Please Enter Semester">
                                                                            <f:selectItem itemLabel="--- Select ---" itemValue=""/>
                                                                            <f:selectItems value="#{hrInternPaymentController.semisters}" var="yer" itemLabel="#{yer.semister}" />
                                                                            <p:ajax event="change" process="@this" update="txtStartdate,txtEnddate,txtIStudentsName"/>
                                                                            <p:message for="txtSemester" display="icon"/>
                                                                        </p:selectOneMenu>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-6">
                                                                <div class="form-horizontal col-md-12 textBoxMargin6px">
                                                                    <h:outputLabel for="txtStartdate" value="Start Date:" class="col-sm-4 control-label"/> 
                                                                    <div class="col-sm-8 textBoxMargin6px">
                                                                        <p:inputText id="txtStartdate" value="#{hrInternPaymentController.hrTdIspStudents.startDate}"/>
                                                                    </div>
                                                                </div>
                                                                <div class="form-horizontal col-md-12 textBoxMargin6px">
                                                                    <h:outputLabel for="txtEnddate" value="End Date:" class="col-sm-4 control-label"/> 
                                                                    <div class="col-sm-8 textBoxMargin6px">
                                                                        <p:inputText id="txtEnddate" value="#{hrInternPaymentController.hrTdIspStudents.endDate}" title="Date"/>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </section>
                                                    </section>
                                                </h:panelGroup>
                                                <h:panelGroup id="pnlDetails">
                                                    <section class="panel panel-info">
                                                        <section class="panel-body">  
                                                            <div class="row">
                                                                <div class="col-md-12">   
                                                                    <div class="box-body">
                                                                        <div class="col-md-6">
                                                                            <div class="form-group form-horizontal form-group required">
                                                                                <h:outputLabel  for="txtIStudentsName" class="control-label col-sm-4" value="Placed Student: "/>
                                                                                <div class="col-sm-8 textBoxMargin6px">
                                                                                    <p:selectOneMenu id="txtIStudentsName" value="#{hrInternPaymentController.hrTdIspStudentDetails}"
                                                                                                     style="width:100%" valueChangeListener="#{hrInternPaymentController.studentListner}"
                                                                                                     converter="entConverter" required="true" requiredMessage="Please Enter Name Of Student">
                                                                                        <f:selectItem itemLabel="--Select--" itemValue=""/>
                                                                                        <f:selectItems value="#{hrInternPaymentController.placedStudentList}" var="pay" itemValue="#{pay}"
                                                                                                       itemLabel="#{pay.firstName}"/>
                                                                                        <p:ajax event="change" process="txtIStudentsName," update="pnlDetails,txtDepartment"/>
                                                                                    </p:selectOneMenu> 
                                                                                    <p:message for="txtIStudentsName" display="icon"/>
                                                                                </div> 
                                                                            </div>
                                                                            <div class="form-group form-horizontal">
                                                                                <h:outputLabel  for="txtStudentId" class="control-label col-sm-4" value="Full Name:"/>
                                                                                <div class="col-sm-8 textBoxMargin6px">
                                                                                    <p:inputText id="txtStudentId" value="#{hrInternPaymentController.hrTdIspStudentDetails.firstName} #{hrInternPaymentController.hrTdIspStudentDetails.middleName} #{hrInternPaymentController.hrTdIspStudentDetails.lastName}" readonly="true"/>
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-group form-horizontal">
                                                                                <h:outputLabel  for="txtStream" class="control-label col-sm-4" value="Stream:"/>
                                                                                <div class="col-sm-8 textBoxMargin6px">
                                                                                    <p:inputText id="txtStream" value="#{hrInternPaymentController.hrTdIspStudentDetails.stream}" readonly="true"/>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-md-6">
                                                                            <div class="form-group form-horizontal">
                                                                                <h:outputLabel  for="txtStudentNumber" class="control-label col-sm-4" value="Phone Number:"/>
                                                                                <div class="col-sm-8 textBoxMargin6px">
                                                                                    <p:inputMask id="txtStudentNumber" mask="(+999) 999-999999" value="#{hrInternPaymentController.hrTdIspStudentDetails.phoneNumber}" readonly="true"/>
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-group form-horizontal">
                                                                                <h:outputLabel  for="txtUniversity" class="control-label col-sm-4" value="University:"/>
                                                                                <div class="col-sm-8 textBoxMargin6px">
                                                                                    <p:inputText id="txtUniversity" value="#{hrInternPaymentController.hrTdIspStudentDetails.internshipStudentId.universityId.universityName}" readonly="true"/>
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-group form-horizontal">
                                                                                <h:outputLabel  for="txtDepartment" class="control-label col-sm-4" value="Work Unit:"/>
                                                                                <div class="col-sm-8 textBoxMargin6px">
                                                                                    <p:inputText id="txtDepartment" value="#{hrInternPaymentController.dept}" readonly="true"/>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </section>
                                                    </section>
                                                    <section class="panel panel-info">
                                                        <section class="panel-body">
                                                            <div class="col-md-6">
                                                                <div class="form-group form-horizontal form-group required">
                                                                    <h:outputLabel  for="txtAmount" class="control-label col-sm-4" value="Amount Paid: "/>
                                                                    <div class="col-sm-8 textBoxMargin6px">
                                                                        <p:inputText id="txtAmount" class="form-control" value="#{hrInternPaymentController.hrTdIspPaymentDetails.amountPaid}"
                                                                                     converterMessage="Enter Number Only"  validator="#{validatorManagedBean.Number}"/>
                                                                        <p:message for="txtAmount" display="icon"/>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group form-horizontal">                                            
                                                                    <div class="col-sm-4">
                                                                    </div>
                                                                    <div class="col-sm-3">
                                                                        <p:commandButton id="btnAdd" class="btn  btn-block btn-primary col-sm-4 " 
                                                                                         value="#{hrInternPaymentController.addorUpdate}"  
                                                                                         disabled="#{hrInternPaymentController.disableBtn}"
                                                                                         action="#{hrInternPaymentController.add}" 
                                                                                         process="@this,pnlDetails" update="tblPaymentditails,pnlDetails"/>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </section>
                                                    </section>
                                                </h:panelGroup>
                                                <h:panelGroup id="pnlTable">
                                                    <div class="form-group">
                                                        <p:dataTable id="tblPaymentditails" value="#{hrInternPaymentController.paymentdetailmodel}"
                                                                     var="stud" rowIndexVar="num"  class="dataTable" rows="10" paginator="true" paginatorPosition="bottom"
                                                                     rowKey="#{stud.studentId}" selectionMode="single" selection="#{hrInternPaymentController.hrTdIspPaymentDetails}">
                                                            <p:ajax event="rowSelect" process="@this" listener="#{hrInternPaymentController.populatesDetial}"
                                                                    update=":frmPlacementStatus,:frmTop"/>   
                                                            <p:column style="width:80px;">
                                                                <f:facet name="header">
                                                                    <h:outputText value="No"/>
                                                                </f:facet>
                                                                <h:outputText value="#{num+1}"/> 
                                                            </p:column>
                                                            <p:column>
                                                                <f:facet name="header">
                                                                    <h:outputText value="Student Name"/>                                                        
                                                                </f:facet>
                                                                <h:outputText  value="#{stud.studentId.firstName} #{stud.studentId.middleName} #{stud.studentId.lastName}"/>
                                                            </p:column>
                                                            <p:column>
                                                                <f:facet name="header">
                                                                    <h:outputText value="Ref No"/>
                                                                </f:facet>
                                                                <h:outputText value="#{stud.referenceNo}"/>
                                                            </p:column> 
                                                            <p:column>
                                                                <f:facet name="header">
                                                                    <h:outputText value="Amount Paid"/>
                                                                </f:facet>
                                                                <h:outputText value="#{stud.amountPaid}"/>
                                                            </p:column> 
                                                            <p:columnGroup type="footer">
                                                                <p:row>
                                                                    <p:column colspan="3" style="text-align:right" footerText="Total"/>
                                                                    <p:column footerText="#{hrInternPaymentController.subTotal}"/>
                                                                </p:row>
                                                            </p:columnGroup>
                                                        </p:dataTable>
                                                    </div> 
                                                </h:panelGroup>
                                                <section class="panel panel-info">
                                                    <section class="panel-body"> 
                                                        <div class="row">
                                                            <div class="col-md-12">   
                                                                <div class="box-body">
                                                                    <div class="col-md-6">
                                                                        <div class="form-group form-horizontal">
                                                                            <h:outputLabel  for="txtBank" class="control-label col-sm-4" value="Prepard By:"/>
                                                                            <div class="col-sm-8 textBoxMargin6px">
                                                                                <p:inputText id="txtBank" value="#{workFlow.userName}" 
                                                                                             readonly="true"/> 
                                                                            </div>  
                                                                        </div>
                                                                        <div class="form-group form-horizontal">
                                                                            <h:outputLabel  for="txtRemark" class="control-label col-sm-4" value="Remark:"/>
                                                                            <div class="col-sm-8 textBoxMargin6px">
                                                                                <h:inputTextarea id="txtRemark"  class="form-control col-md-12" value="#{hrInternPaymentController.hrTdIspPayment.remark}"/>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-6">
                                                                        <div class="form-group form-horizontal">
                                                                            <h:outputLabel  for="txtOndate" class="control-label col-sm-4" value="Prepard On:"/>
                                                                            <div class="col-sm-8">
                                                                                <p:inputText id="txtOndate" placeholder="dd/mm/yyyy" converter="dateConverter"  value="#{hrInternPaymentController.hrTdIspPayment.preparedOn}"
                                                                                             readonly="true" title="prepared Date"/>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </section>
                                                </section>
                                                <h:panelGroup id="pnlSave">
                                                    <div class="form-group col-sm-12">
                                                        <div class="col-sm-6">
                                                            <div class="col-sm-12 form-horizontal">
                                                                <div class="col-sm-4">                                                              
                                                                </div>                                                                    
                                                                <div class="col-sm-3">
                                                                    <p:commandButton id="btnSave" class="btn  btn-block btn-primary col-lg-4" 
                                                                                     value="#{hrInternPaymentController.saveorUpdateBundle}"
                                                                                     action="#{hrInternPaymentController.saveInternshipPayment()}"
                                                                                     process="@this,pnlMaster,txtRemark,txtOndate"                                       
                                                                                     update="@this,:frmPlacementStatus"/>
                                                                </div>
                                                                <div class="col-sm-3">
                                                                    <p:commandButton id="btnReset" value="Reset" class="btn  btn-block btn-primary col-lg-4"                                             
                                                                                     action="#{hrInternPaymentController.resetInternshipPayment()}"
                                                                                     process="@this,pnlMaster,txtRemark,txtOndate" 
                                                                                     update=":frmPlacementStatus" /> 
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </h:panelGroup>                                                      
                                            </div>  
                                        </div>
                                    </div>                           
                                </div>  
                            </div>
                        </div>                   
                    </div>
                </div>
            </h:panelGroup>                           
        </h:form>
    </ui:define>
</ui:composition>

