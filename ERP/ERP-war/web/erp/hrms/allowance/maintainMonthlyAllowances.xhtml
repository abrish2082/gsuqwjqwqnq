<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    template="../../../resources/templates/template.xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:f="http://xmlns.jcp.org/jsf/core">
    <ui:define name="navigaion_content">

        <li><a href="../hrmsDashboard.xhtml"><i class="fa fa-circle-o text-red"></i> <span>Dashboard</span></a></li> 
        <li>                   
            <a href="allowanceAmountRegistration.xhtml"><i class="fa fa-fw"></i>Allowance Amount Registration</a>
        </li>
        <li>                   
            <a href="maintainMonthlyAllowances.xhtml"><i class="fa fa-fw"></i>Maintain Monthly Allowance</a>
        </li>
    </ui:define>
    <ui:define name="contents">
        <p:growl id="growl1" showDetail="true" autoUpdate="true" severity="information"/>
        <div class="row">
            <div class="col-md-12">
                <div class="box box-info ">                   
                    <div class="box-body ">                     
                        <div class="box-body ">
                            <h:form id="frmMonthlyRep">
                                <div class="box-header">
                                    <h4 class="box-title">Maintain Monthly Allowance</h4>                                       
                                </div>
                                <section class="panel panel-info" id="pnl2">
                                    <div class="box-header" title="List of Allowances">
                                        <h1 class="box-title"></h1>                       
                                    </div>
                                    <section class="panel-body">
                                        <div class="box-info">

                                            <p:tabView>
                                                <p:tab title="Job Level">

                                                    <section class="panel panel-info" id="pnl2">
                                                        <div>
                                                            <h4 class="box-title"><p:outputLabel value="#{mantainMonthlyAllowanceController.activePayrollDate}" >
                                                                </p:outputLabel>
                                                            </h4>    </div>

                                                        <section class="panel-body">
                                                            <h:panelGroup id="pnl2">
                                                                <div class="form-group" >
                                                                    <div class="col-sm-12" >
                                                                        <div class="col-md-6 ">  
                                                                            <div class="col-md-12 ">
                                                                                <div class="form-group">
                                                                                    <h:outputLabel value="Allowances in Job Level"  class="control-label col-sm-4"/>
                                                                                    <div class="col-sm-8"> 
                                                                                        <p:selectOneMenu id="drpEarningDed" required="true"  valueChangeListener="#{mantainMonthlyAllowanceController.handleChange}"  value="#{mantainMonthlyAllowanceController.hrPayrollEarningDeductions.code}"  >
                                                                                            <p:ajax update="@(form)" listener="#{mantainMonthlyAllowanceController.handleChange1}"  />
                                                                                            <f:selectItem itemLabel="Select Allowances in job Level" itemValue="#{null}"/>
                                                                                            <f:selectItems itemLabel="#{job.description}" itemValue="#{job.code}" var="job" value="#{mantainMonthlyAllowanceController.listOfEarningDeductions}"/>
                                                                                        </p:selectOneMenu>
                                                                                    </div>
                                                                                </div>                                                                                          
                                                                            </div>
                                                                            <br></br>
                                                                            <br></br>
                                                              
                                                                            <div class="col-md-12 ">
                                                                                <div class="form-group">

                                                                                    <div class="col-sm-8">
                                                                                        <p:commandButton  id="btnSaveJoLevel"  update="pnl2" process="pnl2"  value="Save" action="#{mantainMonthlyAllowanceController.saveAllowanceInJobLevel}" class="btn btn-success "/>
                                                                                    </div>
                                                                                </div>                                            
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </h:panelGroup>
                                                        </section> 
                                                    </section> 
                                                    <section class="panel panel-info" id="pnl2">
                                                        <section class="panel-body">
                                                            <h:form id="frmT">
                                                                <p:dataTable id="tblPension"  rowIndexVar="num"  rows="5"  var="allInJobLevel" paginator="true"
                                                                             value="#{mantainMonthlyAllowanceController.listOfEdJobLevel}">
                                                                    <p:column  >
                                                                        <f:facet name="header">
                                                                            <h:outputText value="S.NO" />
                                                                        </f:facet>
                                                                        <h:outputText value="#{num+1}"/>
                                                                    </p:column>                     
                                                                    <p:column >
                                                                        <f:facet name="header">
                                                                            <h:outputText value="Full Name"/>
                                                                        </f:facet>
                                                                        <h:outputText value="#{allInJobLevel.empId.firstName}"/>
                                                                    </p:column>
                                                                    
                                                                    
                                                                      <p:column >
                                                                        <f:facet name="header">
                                                                            <h:outputText value="Month"/>
                                                                        </f:facet>
                                                                          <h:outputText value="#{allInJobLevel.endDate}"/>
                                                                    </p:column>
                                                                   
                                                                    <p:column >
                                                                        <f:facet name="header">
                                                                            <h:outputText value="Job Level"/>
                                                                        </f:facet>
                                                                        <h:outputText value="#{allInJobLevel.empId.gradeId.levelId.description}"/>
                                                                    </p:column>                                     
                                                                   
                                                                </p:dataTable>    
                                                            </h:form>
                                                        </section> 
                                                    </section> 
                                                </p:tab>

                                                <!--end of Allowance in job level-->


                                                <!--BEGINING OF ALLOWANCE IN JOB TITLE--> 
                                                <p:tab title="Job title">
                                                    <section class="panel panel-info" id="pnl2">
                                                        <div>
                                                            <h4 class="box-title"><p:outputLabel value="#{generatePayroll.activePayrollDate}" >
                                                                </p:outputLabel>
                                                            </h4>    </div>


                                                        <section class="panel-body">
                                                            <h:panelGroup id="pn2">
                                                                <div class="form-group" >
                                                                    <div class="col-sm-12" >
                                                                        <div class="col-md-6 ">  
                                                                            <div class="col-md-12 ">
                                                                                <div class="form-group">
                                                                                    <h:outputLabel value="Allownces in Title"  class="control-label col-sm-4"/>
                                                                                    <div class="col-sm-8"> 
                                                                                        <p:selectOneMenu id="dropEarningForTitle"  required="true" valueChangeListener="#{mantainMonthlyAllowanceController.handleChange}"  value="#{mantainMonthlyAllowanceController.hrPayrollEarningDeductions.code}"  >
                                                                                            <p:ajax listener="#{mantainMonthlyAllowanceController.handleChangeInJobtitle}" update="frmJotitleDtableForm"/>
                                                                                            <f:selectItem itemLabel="Select Earnings" itemValue="#{null}"/>
                                                                                            <f:selectItems itemLabel="#{jt.description}" itemValue="#{jt.code}" var="jt" value="#{mantainMonthlyAllowanceController.listOfAllowancesInJobTitle}"/>
                                                                                        </p:selectOneMenu>
                                                                                    </div>
                                                                                </div>                                                                                          
                                                                            </div>
                                                                     
                                                                     

                                                                            <div class="col-md-12 ">
                                                                                <div class="form-group">

                                                                                    <div class="col-sm-8">
                                                                                        <p:commandButton id="btnSave0" value="Save" update="pn2" process="pn2"  actionListener="#{mantainMonthlyAllowanceController.saveAllowanceInJobTitle()}"></p:commandButton>
                                                                                    </div>
                                                                                </div>                                            
                                                                            </div>


                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </h:panelGroup>
                                                        </section> 
                                                    </section>   


                                                    <section class="panel panel-info" id="pnlAllInJTitle">

                                                        <section class="panel-body">
                                                            <h:form id="frmJotitleDtableForm">
                                                                <p:dataTable id="tblAllInJobTitle"  rowIndexVar="num"  rows="5"  var="allInTitle" paginator="true"
                                                                             value="#{mantainMonthlyAllowanceController.listOfEdInJobTitle}">
                                                              <p:column  >
                                                                        <f:facet name="header">
                                                                            <h:outputText value="S.NO" />
                                                                        </f:facet>
                                                                        <h:outputText value="#{num+1}"/>
                                                                    </p:column>                     
                                                                    <p:column >
                                                                        <f:facet name="header">
                                                                            <h:outputText value="Full Name"/>
                                                                        </f:facet>
                                                                        <h:outputText value="#{allInTitle.empId.firstName}"/>
                                                                    </p:column>
                                                                    
                                                                    
                                                                      <p:column >
                                                                        <f:facet name="header">
                                                                            <h:outputText value="Month"/>
                                                                        </f:facet>
                                                                          <h:outputText value="#{allInTitle.endDate}"/>
                                                                    </p:column>
                                                                   
                                                                    <p:column >
                                                                        <f:facet name="header">
                                                                            <h:outputText value="Job Title"/>
                                                                        </f:facet>
                                                                        <h:outputText  value="#{allInTitle.empId.jobId.jobTitle}"/>
                                                                    </p:column>  

                                                                    
                                                                </p:dataTable>
                                                            </h:form>
                                                        </section> 
                                                    </section> 

                                                </p:tab>

                                                <!--START OF ALLOWANCE IN lOCATION -->




                                                <p:tab title="Location">
                                                    <section class="panel panel-info" id="pnl2">

                                                        <div>
                                                            <h4 class="box-title"><p:outputLabel value="#{generatePayroll.activePayrollDate}" >
                                                                </p:outputLabel>
                                                            </h4>    </div>

                                                        <section class="panel-body">
                                                            <h:panelGroup id="pnlLocation">
                                                                <div class="form-group" >
                                                                    <div class="col-sm-12" >
                                                                        <div class="col-md-6 ">  
                                                                            <div class="col-md-12 ">
                                                                                <div class="form-group">
                                                                                    <h:outputLabel value="Allowance in Location"  class="control-label col-sm-4"/>
                                                                                    <div class="col-sm-8"> 
                                                                                        <p:selectOneMenu id="dropAllowanceInLocation" required="true"  style="width:100%" valueChangeListener="#{mantainMonthlyAllowanceController.handleChange}"  value="#{mantainMonthlyAllowanceController.hrPayrollEarningDeductions.code}" >
                                                                                            <p:ajax listener="#{mantainMonthlyAllowanceController.handleChangeAllInLocation}"  update="frmLocationDatatable" />
                                                                                            <f:selectItem itemLabel="Select Earnings" itemValue="#{null}"/>
                                                                                            <f:selectItems itemLabel="#{lc.description}" itemValue="#{lc.code}" var="lc" value="#{mantainMonthlyAllowanceController.listOfAllowncesInLocation}"/>
                                                                                        </p:selectOneMenu>
                                                                                    </div>
                                                                                </div>                                                                                          
                                                                            </div>
                                                                           

                                                                            <div class="col-md-12 ">
                                                                                <div class="form-group">

                                                                                    <div class="col-sm-8">
                                                                                        <p:commandButton id="btnSave1" value="Save" update="pnlLocation" process="pnlLocation"   actionListener="#{mantainMonthlyAllowanceController.saveAllowanceInLocation()}" ></p:commandButton>
                                                                                    </div>
                                                                                </div>                                            
                                                                            </div>



                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </h:panelGroup>
                                                        </section> 
                                                    </section>   


                                                    <section class="panel panel-info" id="pnlAllInJTitle">

                                                        <section class="panel-body">
                                                            <h:form id="frmLocationDatatable">
                                                                <p:dataTable id="tblAllInJobTitle"  rowIndexVar="num"  rows="5"  var="allInLoc" paginator="true"
                                                                             value="#{mantainMonthlyAllowanceController.listOfEdInLocation}">
                                                                    <p:column  >
                                                                        <f:facet name="header">
                                                                            <h:outputText value="S.NO" />
                                                                        </f:facet>
                                                                        <h:outputText value="#{num+1}"/>
                                                                    </p:column>                     
                                                                    <p:column >
                                                                        <f:facet name="header">
                                                                            <h:outputText value="Full Name"/>
                                                                        </f:facet>
                                                                        <h:outputText value="#{allInLoc.empId.firstName} #{allInLoc.empId.middleName} #{allInLoc.empId.lastName}"/>
                                                                    </p:column>
                                                                    <p:column >
                                                                        <f:facet name="header">
                                                                            <h:outputText value="Amount"/>
                                                                        </f:facet>
                                                                        <h:outputText value="#{allInLoc.monthlyAmount}"/>
                                                                    </p:column>
                                                                 

                                                                   
                                                                </p:dataTable>
                                                            </h:form>
                                                        </section> 
                                                    </section> 

                                                </p:tab>







                                            </p:tabView>


                                        </div>
                                    </section>
                                </section>
                            </h:form>
                        </div>                        
                    </div>                        
                </div> 
            </div>
        </div>
    </ui:define>
</ui:composition>
