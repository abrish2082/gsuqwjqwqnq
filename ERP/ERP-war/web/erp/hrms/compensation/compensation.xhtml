<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    template="../../../resources/templates/template.xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets">


    <ui:define name="navigaion_content">
        <li><a href="../hrmsDashboard.xhtml" title="Dashboard"><i class="fa  fa-fw fa-dashboard"></i> <span>Dashboard</span></a></li> 

    </ui:define>
    <ui:define name="contents">
        <h:form id="frmSample"> 
            <p:toolbar  style="background-color:white;border-color: white">
                <f:facet name="right">


                    <span class="ui-separator">
                        <span class="ui-icon ui-icon-grip-dotted-vertical"/>
                    </span>
                    <a href="compensation.xhtml"><i class="fa fa-fw fa-refresh" title="Refresh"></i></a>

                    <span class="ui-separator">
                        <span class="ui-icon ui-icon-grip-dotted-vertical" />
                    </span>
                    <a href="../hrmsDashboard.xhtml"><i class="fa fa-fw fa-dashboard" title="Dashboard"></i></a>
                    <span class="ui-separator">
                        <span class="ui-icon ui-icon-grip-dotted-vertical"/>
                    </span>
                </f:facet>
            </p:toolbar>

        </h:form>

        <div class="row">
            <div class="col-md-12">
                <div class="box box-primary ">
                    <div class="box-header">
                        <h3 class="box-title">Compensation Payment </h3>  
                    </div>
                    <div class="box-body ">
                        <div class="box-body ">
                            <h:form id="frmCompReq">
                                <p:growl id="growl"  autoUpdate="true" severity="information,fatal" showDetail="true" />  
                               
                                <h:panelGroup id="manage" style="border: 0px; background-color: transparent"  >

                                    <div class="row">
                                        <div class="col-md-12">
                                            <h:panelGroup id="pngLeaveRequest">  
                                                <section class="panel panel-info" id="pnl1">
                                                    <section class="panel-body">

                                                        <div class="col-md-6">
                                                            <div class="col-md-12 textBoxMargin6px ">
                                                                <div class="form-group form-horizontal">   
                                                                    <label for="txtEmpID" class="control-label col-sm-4" >Employee Id:</label>
                                                                    <div class="col-sm-8">
                                                                        <p:autoComplete   id="txtEmpID" placeholder="Enter Your ID Here" value="#{compensationController.employee.empId}" 
                                                                                          emptyMessage="Employee not exit"     maxResults="10"      style="width: 100%"  
                                                                                          completeMethod="#{compensationController.searchEmployee}" required="true" requiredMessage="Employee Id required"
                                                                                          var="emp" itemValue="#{emp.empId}" itemLabel="#{emp}"   >
                                                                            <p:column headerText="ID"  >
                                                                                <h:outputText value="#{emp.empId}" />
                                                                            </p:column>
                                                                            <p:column headerText="First Name" >
                                                                                <h:outputText  value="#{emp.firstName}" />
                                                                            </p:column>
                                                                            <p:column  headerText="Middle Name">
                                                                                <h:outputText value="#{emp.middleName}" />
                                                                            </p:column>
                                                                            <p:ajax  event="itemSelect" listener="#{compensationController.getEmployeeInfo}" process="@this" 
                                                                                     update="@this,txtExprience,texDesc,btnSave1,txtFirstName,txtdpt,txtPosition,txtsal,txtcom,tblleaveBalance2,tblseverance,txtxPdate" /> 
                                                                        </p:autoComplete> 
                                                                        <p:message for="txtEmpID" display="icon"/>  
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="col-md-12 textBoxMargin6px ">
                                                                <div class="form-group form-horizontal">   
                                                                    <label for="txtdpt" class="control-label col-sm-4" >Department:</label>
                                                                    <div class="col-sm-8"> 
                                                                        <p:inputText id="txtdpt" value="#{compensationController.employee.deptId.depName}" readonly="true" 
                                                                                     > 

                                                                        </p:inputText>
                                                                        <p:message for="txtdpt" display="icon"/>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="col-md-12 textBoxMargin6px ">
                                                                <div class="form-group form-horizontal">   
                                                                    <label for="txtsal" class="control-label col-sm-4" >Salary:</label>
                                                                    <div class="col-sm-8"> 
                                                                        <p:inputText id="txtsal" value="#{compensationController.employee.basicSalary}" 
                                                                                     readonly="true" />
                                                                        <p:message for="txtsal" display="icon"/>
                                                                        <p:message for="txtsal" display="icon"/>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6">


                                                            <div class="col-md-12 textBoxMargin6px ">
                                                                <div class="form-group form-horizontal">  
                                                                    <label for="txtFirstName" class="control-label col-sm-4" >Employee Name:</label>
                                                                    <div class="col-sm-8"> 
                                                                        <p:inputText id="txtFirstName" value="#{compensationController.employee.firstName}#{compensationController.employee.middleName}#{compensationController.employee.lastName}"  readonly="true" />
                                                                        <p:message for="txtFirstName" display="icon"/>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="col-md-12 textBoxMargin6px ">
                                                                <div class="form-group form-horizontal">   
                                                                    <label for="txtPosition" class="control-label col-sm-4" >Position:</label>
                                                                    <div class="col-sm-8"> 

                                                                        <p:inputText id="txtPosition" value="#{compensationController.employee.jobId.jobTitle}" 
                                                                                     readonly="true" />
                                                                        <p:message for="txtPosition" display="icon"/>

                                                                    </div>
                                                                </div>
                                                            </div>



                                                            <div class="col-md-12 textBoxMargin6px ">
                                                                <div class="form-group form-horizontal">   
                                                                    <label for="txtExprience" class="control-label col-sm-4" >Service Year :</label>
                                                                    <div class="col-sm-8">
                                                                        <p:inputText id ="txtExprience"  value="#{compensationController.experience}" style="width: 100%" 
                                                                                     readonly="true" >

                                                                        </p:inputText>                  
                                                                        <p:message for="txtExprience" display="icon"/>  
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                    </section> 

                                                </section>

                                            </h:panelGroup>



                                            <h:panelGroup id="pnlLeaveBalance">
                                                <section class="panel panel-info" id="pnl1">
                                                    <section class="panel-body">

                                                              <p:dataTable id="tblleaveBalance2" var="balanceInfo" rows="3" 
                                                                           rowIndexVar="Det" value="#{compensationController.compensationDetailDataModel}" 
                                                                           class="dataTable"    
                                                                           paginator="true" paginatorPosition="bottom"
                                                                           paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                                           rowsPerPageTemplate="5,10,15"    >
                                                            <f:facet name="header">
                                                                <h4>   Annual Leave Compensation </h4>
                                                            </f:facet>

                                                                <p:column headerText="Basic Salary Year">
                                                                        <h:outputText value="#{balanceInfo.leaveBalaceId.employeeId.basicSalary}"/>
                                                                 </p:column>
                                                            <p:column headerText="Income Tax">
                                                                        <h:outputText value="#{compensationController.tax}"/>
                                                                 </p:column>
                                                            <p:column headerText="Pension">
                                                                        <h:outputText value="#{compensationController.pension}"/>
                                                                 </p:column>
                                                            <p:column headerText="NetPay">
                                                                        <h:outputText value="#{compensationController.netPay}"/>
                                                                 </p:column>
                                                            <p:column headerText="Leave Year">
                                                                        <h:outputText value="#{balanceInfo.leaveBalaceId.leaveYearId.budgetYear}"/>
                                                                 </p:column>
                                                            <p:column headerText="Total Days">
                                                                       <h:outputText value="#{balanceInfo.leaveBalaceId.totalDays}"/>
                                                            </p:column> 
                                                            <p:column headerText="Remaining Days">
                                                                          <h:outputText value="#{balanceInfo.leaveBalaceId.remainingDays}"/>
                                                            </p:column>
                                                            <p:column headerText="Accrued Leave Days">
                                                                          <h:outputText value="#{balanceInfo.accruedLeavedays}"/>
                                                            </p:column>
                                                            <p:column headerText="Accrued Leave Amount">
                                                                          <h:outputText value="#{balanceInfo.accruedLeaveAmount}"/>
                                                            </p:column>
                                                            <p:columnGroup type="footer" >
                                                                <p:row >

                                                                    <p:column colspan="7"  footerText="Total" />
                                                                    <p:column colspan="1"  footerText=" #{compensationController.totalLeavedays} Days" />
                                                                    <p:column colspan="1"  footerText="#{compensationController.accruedLeaveAmountDecimal} ETB" />
                                                                </p:row>
                                                                <p:row>
                                                                    <p:column colspan="9"   footerText="Accrued Leave..............................#{compensationController.accruedLeaveAmountDecimal} " /> 
                                                                </p:row>
                                                                <p:row>
                                                                    <p:column  colspan="9"  footerText="                      Cash.............................#{compensationController.accruedLeaveAmountDecimal} " />

                                                                </p:row>

                                                            </p:columnGroup> 
                                                               
                                                        </p:dataTable>
                                                    </section>
                                                </section>
                                            </h:panelGroup>  


                                            <h:panelGroup id="pnlLeavesevereance">
                                                <section class="panel panel-info" id="pnl2">
                                                    <section class="panel-body">

                                                         <p:dataTable id="tblseverance" var="sev" rows="3" 
                                                                      rowIndexVar="Det" value="#{compensationController.compList}" 
                                                                      class="dataTable"    
                                                                      paginator="true" paginatorPosition="bottom"
                                                                      paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                                      rowsPerPageTemplate="5,10,15"    >
                                                            <f:facet name="header">
                                                                <h4>    Severance Payment  </h4>
                                                            </f:facet>
                                                                  <p:column headerText="1-Year(#{compensationController.firstYearDuration})" 

                                                                            >

                                                                        <h:outputText value="#{sev.firstYearAmount1}"/>
                                                                 </p:column>
                                                            <p:column headerText="#{compensationController.expInYearAfetrFirst}-Year(#{compensationController.yearsAfterFirstYearDuration})">
                                                                        <h:outputText value="#{sev.yearsAfterFirstYearAmount1}"/>
                                                                 </p:column>
                                                                <p:column headerText="#{compensationController.expInMonth}-Month((#{compensationController.monthsDuration})">
                                                                        <h:outputText value="#{sev.monthsAmount1}"/>
                                                                 </p:column>
                                                            <p:column headerText="#{compensationController.expday}-Days(#{compensationController.daysDuration})">
                                                                        <h:outputText value="#{sev.daysAmount1}"/>
                                                                 </p:column>
                                                            <p:columnGroup type="footer" >
                                                                <p:row >

                                                                    <p:column colspan="3"  footerText="Total = #{compensationController.severanceDecimal} ETB" />
                                                                </p:row>
                                                                <p:row>
                                                                    <p:column colspan="4"   footerText="Severance..............................#{compensationController.severanceDecimal} " /> 
                                                                </p:row>
                                                                <p:row>
                                                                    <p:column  colspan="4"  footerText="                      Cash.............................#{compensationController.severanceDecimal} " />

                                                                </p:row>
                                                            </p:columnGroup>                           

                                                                
                                                        </p:dataTable>
                                                    </section>
                                                </section>
                                            </h:panelGroup> 
                                            <h:panelGroup  >
                                                <div class="col-md-6">
                                                    <div class="col-md-12 textBoxMargin6px ">
                                                        <div class="form-group form-horizontal">   
                                                            <label for="txtcom" class="control-label col-sm-4" >Compensation Amount :</label>
                                                            <div class="col-sm-8">
                                                                <p:inputText id ="txtcom"  value="#{compensationController.compensationdecimal}" style="width: 100%; font-size: large" 
                                                                             readonly="true" >

                                                                </p:inputText>                  
                                                                <p:message for="txtcom" display="icon"/>  
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="col-md-12 textBoxMargin6px ">
                                                        <div class="form-group form-horizontal">   
                                                            <label for="txtxPdate" class="control-label col-sm-4" >Process Date:</label>
                                                            <div class="col-sm-8">
                                                                <p:inputText id ="txtxPdate" onclick="displayCalendar('frmCompReq:txtxPdate', 'frmCompReq:txtxPdate');" 
                                                                             required="true"  requiredMessage="select Process date"
                                                                             value="#{compensationController.hrEmployeeCompensation.processDate}" style="width: 100%" 
                                                                             >

                                                                </p:inputText>                  
                                                                <p:message for="txtxPdate" display="icon"/>  
                                                            </div>
                                                        </div>
                                                    </div>


                                                    <div class="col-md-12 textBoxMargin6px  ">
                                                        <div class="form-group form-horizontal">   
                                                            <p:outputLabel class="control-label col-sm-4" value=""/>

                                                        </div>
                                                    </div>
                                                    <div class="col-md-12 textBoxMargin6px  ">
                                                        <div class="form-group form-horizontal">   
                                                            <p:outputLabel class="control-label col-sm-4" value=""/>
                                                            <div class="col-sm-2">
                                                                <p:commandButton id="btnSave1" class="btn  btn-block btn-primary col-lg-4"  value="Save" 
                                                                                 action="#{compensationController.saveCompensation}" disabled="#{compensationController.renderSave}"
                                                                                 process="@this,frmCompReq" update="@this,:frmCompReq,growl"/> 
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="col-md-12 textBoxMargin6px ">
                                                        <div class="form-group form-horizontal">
                                                            <h:outputLabel for="txtPreparedBY" class="control-label col-sm-4"  value="Prepared By:"/>

                                                            <div class="col-sm-8">
                                                                <p:inputText id="txtPreparedBY" value="#{needRequestController.fullName}"
                                                                             title="txtPreparedBY" readonly="true" />
                                                                <p:message for="txtPreparedBY" display="icon"/>
                                                            </div>


                                                        </div>
                                                    </div>
                                                    <div class="col-md-12 textBoxMargin6px ">
                                                        <div class="form-group form-horizontal">   
                                                            <p:outputLabel class="control-label col-sm-4" value="Remark:"/>
                                                            <div class="col-sm-8"> 
                                                                <p:inputTextarea id="texDesc" value="#{compensationController.hrEmployeeCompensation.remark}"
                                                                                 class="form-control" rows="1" cols="5" autoResize="false" />  
                                                                <p:message for="texDesc" display="icon"/>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </h:panelGroup>

                                        </div>
                                    </div>

                                </h:panelGroup>
                            </h:form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </ui:define>
</ui:composition>
