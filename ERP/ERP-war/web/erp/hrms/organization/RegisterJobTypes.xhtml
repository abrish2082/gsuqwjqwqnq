<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    template="../../../resources/templates/template.xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:f="http://xmlns.jcp.org/jsf/core">
    <ui:define name="navigaion_content">
        <li><a href="../hrmsDashboard.xhtml"><i class="fa fa-circle-o text-red"></i> <span>Dashboard</span></a></li> 
        <li><a href="jobRegistration.xhtml"><i class="fa fa-fw fa-refresh"></i>Refresh Page</a></li>
        <li><a href="OrganizationStruacture.xhtml"><i class="fa fa-fw"></i>Organization Structure</a></li>
        <li><a href="SalaryScaleRegistration.xhtml"><i class="fa fa-fw"></i>Pay Grade</a></li>
    </ui:define>

    <ui:define name="contents">
        <p:growl id="growl1" showDetail="true" autoUpdate="true" severity="information"/>
        <div class="row">
            <div class="col-md-12">
                <div class="box box-info ">                   
                    <div class="box-body ">                     
                        <div class="box-body ">
                            <h:form id="form1">
                                <section class="panel panel-info">
                                    <div class="box-header">
                                        <h1 class="box-title"></h1>                       
                                    </div>
                                    <section class="panel-body">
                                        <div class="form-group" >
                                            <div class="col-sm-12" >
                                                <div class="col-md-6 ">  
                                                    <div class="col-md-12 ">
                                                        <div class="form-group">
                                                            <div class="col-sm-8"> 
                                                                <p:autoComplete id="event" value="#{registerJobTypes.jobTitle}"  itemLabel="#{registerJobTypes.hrJobTypes.jobTitle}" itemValue="#{p.id}-#{p.jobTitle}"  
                                                                                completeMethod="#{registerJobTypes.loadListOfJobTypes}" var="p" >
                                                                    <p:ajax  event="itemSelect" listener="#{registerJobTypes.handleSelect}"  update="pnlJobTitles,tblEduQual,btnUpdate"  process="@(form)"/>
                                                                    <p:column >
                                                                        <h:outputLabel value="#{p.jobTitle}" />                         
                                                                    </p:column>
                                                                </p:autoComplete>
                                                            </div>
                                                        </div> 
                                                    </div> 
                                                </div>
                                            </div> 
                                        </div> 
                                    </section>
                                </section>
                                <p:panel  id="pnlJobTitles" class="panel panel-info">
                                    <section class="panel panel-info" id="pnl3">
                                        <div class="box-header">
                                            <h1 class="box-title"></h1>                       
                                        </div>
                                        <section class="panel-body">
                                            <div class="form-group" >
                                                <div class="col-sm-12" >
                                                    <div class="col-sm-6" > 
                                                        <div class="col-md-12 ">
                                                            <div class="form-group">
                                                                <h:outputLabel  class="control-label col-sm-4" value="Grade:"/> 
                                                                <div class="col-sm-8">
                                                                    <p:inputText  class="form-control" value="#{registerJobTypes.hrJobTypes.jobTitle}" ></p:inputText>
                                                                </div>
                                                            </div>                                            
                                                        </div> 
                                                        <br></br>
                                                        <br></br>
                                                        <div class="col-md-12 ">
                                                            <div class="form-group">
                                                                <h:outputLabel  class="control-label col-sm-4" value="Job Title"/> 
                                                                <div class="col-sm-8">
                                                                    <p:selectOneMenu   required="true" requiredMessage="Please select Job Level !" value="#{salaryScaleController.selectedLevel}"  valueChangeListener="#{salaryScaleController.getJobLevel}" style="width: 100%">
                                                                        <p:ajax listener="#{salaryScaleController.onLevelChange()}" event="change" update="@this"/>
                                                                        <f:selectItem itemLabel="Select Levels" itemValue="#{null}"/>
                                                                        <f:selectItems itemLabel="#{level.description}" itemValue="#{level.id}-#{level.description}" var="level" value="#{salaryScaleController.listOfJobLevels}"/>
                                                                    </p:selectOneMenu>
                                                                </div>
                                                            </div>                                            
                                                        </div>
                                                        <br></br>
                                                        <br></br>
                                                        <div class="col-md-12 ">
                                                            <div class="form-group">
                                                                <h:outputLabel  class="control-label col-sm-4" value="Job Code:"/> 
                                                                <div class="col-sm-8">
                                                                    <p:inputText class="form-control" value="#{registerJobTypes.hrJobTypes.jobCode}" ></p:inputText>
                                                                </div>
                                                            </div>                                            
                                                        </div>
                                                        <br></br>
                                                        <br></br> 
                                                        <div class="col-md-12 ">
                                                            <div class="form-group">
                                                                <h:outputLabel  class="control-label col-sm-4" value="Job Grade:"/> 
                                                                <div class="col-sm-8">
                                                                    <p:selectOneMenu id="drpEarningDed"  value="#{registerJobTypes.salaryScalseCode}" valueChangeListener="#{registerJobTypes.handleChange}"    >
                                                                        <f:selectItem itemLabel="Select Grades" itemValue="#{null}"/>
                                                                        <f:selectItems itemLabel="#{sc.description}" itemValue="#{sc.id}" var="sc" value="#{registerJobTypes.listOfSalaryScaleRanges}"/>
                                                                    </p:selectOneMenu>

                                                                </div>
                                                            </div>                                            
                                                        </div>
                                                        <br></br><br></br>
                                                        <div class="col-md-12 ">
                                                            <div class="form-group">
                                                                <h:outputLabel  class="control-label col-sm-4" value="Relevant Expereance:"/> 
                                                                <div class="col-sm-8">
                                                                    <p:inputText class="form-control" value="#{registerJobTypes.hrJobTypes.relevantExperiance}" ></p:inputText> 
                                                                </div>
                                                            </div>                                            
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6" > 
                                                        <div class="col-md-12 ">
                                                            <div class="form-group">
                                                                <h:outputLabel  class="control-label col-sm-4" value="Report To:"/> 
                                                                <div class="col-sm-8">  
                                                                    <p:inputText class="form-control" value="#{registerJobTypes.hrJobTypes.reportTo}" ></p:inputText>
                                                                </div> 
                                                            </div>                                            
                                                        </div>                          
                                                    </div>
                                                    <br></br>
                                                    <br></br>
                                                    <div class="col-sm-6" > 
                                                        <div class="col-md-12 ">
                                                            <div class="form-group">
                                                                <h:outputLabel  class="control-label col-sm-4" value="Job Description:"/> 
                                                                <div class="col-sm-8">  
                                                                    <p:inputTextarea class="form-control" value="#{registerJobTypes.hrJobTypes.jobDescription}" ></p:inputTextarea>
                                                                </div> 
                                                            </div>                                            
                                                        </div>                          
                                                    </div>
                                                    <br></br><br></br>
                                                    <div class="col-sm-6" > 
                                                        <div class="col-md-12 ">
                                                            <div class="form-group">
                                                                <h:outputLabel  class="control-label col-sm-4" value="Number of Employees Needded:"/> 
                                                                <div class="col-sm-8">  
                                                                    <p:inputText class="form-control" value="#{registerJobTypes.hrJobTypes.relevantExperiance}" ></p:inputText>
                                                                </div> 
                                                            </div>                                            
                                                        </div>                          
                                                    </div>
                                                </div>
                                            </div>
                                        </section>
                                    </section> 
                                </p:panel>
                                <p:dialog widgetVar="dlgSteps" modal="true" id="dispDialogs" header="Education Level" style="position:absolute; top:0px;">
                                    <p:panelGrid columns="2">
                                        <f:facet name="Salary Steps">
                                            <h:outputLabel>Salary Steps</h:outputLabel>
                                        </f:facet>
                                        <p:outputLabel>Education Level</p:outputLabel>
                                        <p:selectOneMenu   valueChangeListener="#{registerJobTypes.educationLevel}">
                                            <f:selectItem itemLabel="Select Education Level" itemValue="#{null}"/>
                                            <f:selectItems itemLabel="#{educLevel.educLevel}" itemValue="#{educLevel.id}-#{educLevel.educLevel}" var="educLevel" value="#{registerJobTypes.listOfEducLevelrs}"/>
                                        </p:selectOneMenu>
                                        <p:outputLabel>Qualification</p:outputLabel>
                                        <p:selectOneMenu valueChangeListener="#{registerJobTypes.educationType}">
                                            <f:selectItem itemLabel="Select Qualification" itemValue="#{null}"/>
                                            <f:selectItems itemLabel="#{eduType.educType}" itemValue="#{eduType.id}-#{eduType.educType}" var="eduType" value="#{registerJobTypes.listOfEduTypes}"/>
                                        </p:selectOneMenu>
                                        <p:outputLabel>Minimum Expereance</p:outputLabel>
                                        <p:inputText value="#{registerJobTypes.jobEducationQualification.minExperiance}"/>
                                        <p:commandButton id="btnAdd" value="Add Education Level" update="form1" process="form1" action="#{registerJobTypes.addEducationQualification()}"/>
                                    </p:panelGrid>
                                </p:dialog> 
                                <p:spacer height="5px;"/>
                                <div class="form-group-lg">
                                    <div class="col-lg-40" style="text-align: center;">

                                        <p:commandButton id="btnShow" style=" top:30spx; left:600px" value="+" onclick="PF('dlgSteps').show()"  action="#{registerJobTypes.addNewItem()}"/>
                                    </div>
                                </div>
                                <p:spacer height="10px"></p:spacer>
                                <p:dataTable id="tblEduQual" value="#{registerJobTypes.hrJobEducationQual}" var="qual" style="width: 100%">                                  
                                    <p:column headerText="Eductation Level">
                                        <h:outputLabel value="#{qual.educLevelId.educLevel}"></h:outputLabel>
                                    </p:column>
                                    <p:column headerText="Qualification">
                                        <h:outputLabel value="#{qual.educQualId.educType}"></h:outputLabel>
                                    </p:column>
                                    <p:column headerText="Minimum Expereance">
                                        <h:outputText value="#{qual.minExperiance}" />  
                                    </p:column>
                                    <p:column headerText="Action">
                                        <p:commandLink value="Edit" oncomplete="PF('dlgSteps').show()" update="@(form)" actionListener="#{registerJobTypes.edit()}" >  
                                            <f:setPropertyActionListener value="#{qual}" target="#{registerJobTypes.jobEducationQualification}" />
                                        </p:commandLink >
                                    </p:column>
                                </p:dataTable>
                                <p:commandButton id="btnNew" value="New" action="#{registerJobTypes.newJobTitle()}" process="@(form)" update="@(form)"/>
                                <p:commandButton id="btnUpdate" value="#{registerJobTypes.saveOrUpdate}" actionListener="#{registerJobTypes.saveJobTypes()}" process="@(form)" update="@(form)"/>
                            </h:form>
                        </div>                        
                    </div>                        
                </div> 
            </div>
        </div>
    </ui:define>
</ui:composition>