<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    template="../../../resources/templates/template.xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets">


    <ui:define name="navigaion_content">
        


    </ui:define>
    <ui:define name="contents">
        <h:form id="frmSample"> 
            <p:toolbar  style="background-color:white;border-color: white">
                <f:facet name="right">


                    <span class="ui-separator">
                        <span class="ui-icon ui-icon-grip-dotted-vertical"/>
                    </span>
                    <a href="compensation.xhtml"><i class="fa fa-fw fa-refresh" title="Refresh"></i></a>

                    <span class="ui-separator">
                        <span class="ui-icon ui-icon-grip-dotted-vertical" />
                    </span>
                    <a href="../hrmsDashboard.xhtml"><i class="fa fa-fw fa-dashboard" title="Dashboard"></i></a>
                    <span class="ui-separator">
                        <span class="ui-icon ui-icon-grip-dotted-vertical"/>
                    </span>
                </f:facet>
            </p:toolbar>

        </h:form>


        <h:form id="frmCompReq">
            <p:growl id="growl"  autoUpdate="true" severity="information,fatal" showDetail="true" />  
            <!--
                        <h:panelGroup id="pnlSearch" style="border: 0px; background-color: transparent" rendered="#/{needRequestController.searchPage}">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="box box-primary"> 
                                        <div class="box-header with-border">
                                            <h3 class="box-title" >Search ...</h3>
            
                                            <section class="panel panel-info">
                                                <section class="panel-body">
                                                    <h:panelGroup id="searchpnl" class="col-sm-12">   
                                                        <div class="col-md-6">
                                                            <div class="col-md-12 textBoxMargin6px ">
                                                                <div class="form-group form-horizontal">                                                                
                                                                    <h:outputLabel for="txtEmployeeId" value="Employee Id :" class="control-label col-sm-4"/>
                                                                    <div class="col-sm-8">
                                                                        <p:inputText id="txtEmployeeId"  value="#.{compensationController.employee.empId}"
                                                                                     required="true" requiredMessage="Select Year" style="width:100%">
            
                                                                        </p:inputText>
                                                                        <p:message for="txtEmployeeId" display="icon"/>
                                                                    </div>
                                                                </div>                                                                                         
                                                            </div> 
                                                            <div class="col-md-12 textBoxMargin6px ">
                                                                <div class="form-group form-horizontal">
                                                                    <h:outputLabel for="btnfind" value=" " class="control-label col-sm-4"/>
                                                                    <div class="col-sm-2">  
                                                                        <p:commandButton id="btnfind" class="btn  btn-block btn-primary col-md-2" 
                                                                                         value="Find" action="#/{leaveRequest.calculateReturnDateLeaveRequest}" 
                                                                                         process="@this,:frmCompReq" update="@this,:frmCompReq"/> 
                                                                    </div>   
                                                                </div>
                                                            </div>
                                                        </div>
            
            
                                                    </h:panelGroup>
            
            
                                                </section>
                                            </section>
            
                                            <section class="panel panel-info">
                                                <section class="panel-body">
                                                    <h:panelGroup id="searchpnltbl" class="col-sm-12">  
                                                        <div class="box-body">                                
                                                            <div class="col-md-12">                                       
                                                                <div class="col-md-12">
                                                                    <div class="form-group">
                                                                        <p:dataTable id="tblNeedRequest" value="#/{compensationController.compensationDataModel}"
                                                                                     var="comp" class="dataTable" selectionMode="single" rowKey="#/{needReq.id}"
                                                                                     widgetVar="tblNeedRequest" rowIndexVar="num" editable="true" rows="10" paginator="true" paginatorPosition="bottom">    
                                                                            <p:ajax event="rowSelect" listener="#/{needRequestController.resultdisplayChanged}"
                                                                                    process="@this,tblNeedRequest" update=":frmCompReq,:frmSample"/>     
                                                                            <p:column headerText="No." style="width:40px">
                                                                                <h:outputText value="#/{num + 1}"/>
                                                                            </p:column>                                                                
                                                                            <p:column headerText="Employe Id">
                                                                                <h:outputText value="#/{comp.empId.empId}"/>
                                                                            </p:column> 
                                                                            <p:column headerText="Employe Name">
                                                                                <h:outputText value="#/{comp.empId.firstName} #/{comp.empId.middleName} #/{comp.empId.lastName}"/>
                                                                            </p:column>
                                                                            <p:column headerText="Accred Leave Amount(in Birr)">
                                                                                <h:outputText value="#/{comp.accruedLeaveInBirr}"/>
                                                                            </p:column> 
                                                                            <p:column headerText="severance Amount">
                                                                                <h:outputText value="#/{comp.severanceAmount}"/>
                                                                            </p:column> 
                                                                            <p:column headerText="Compensation Amount">
                                                                                <h:outputText value="#/{comp.severanceAmount}"/>
                                                                            </p:column> 
                                                                            <p:column headerText="Process Date">
                                                                                <h:outputText value="#/{comp.processDate}"/>
                                                                            </p:column> 
                                                                        </p:dataTable>
                                                                    </div>
                                                                </div>
                                                            </div>        
                                                        </div>
                                                    </h:panelGroup>
                                                </section>
                                            </section>
            
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </h:panelGroup> -->
            <h:panelGroup id="manage" style="border: 0px; background-color: transparent"  >

                <div class="row">
                    <div class="col-md-12">
                        <div class="box box-primary"> 
                            <div class="box-header with-border">

                                <div class="nav-tabs-custom">
                                    <ul class="nav nav-tabs">
                                        <li class="active">
                                            <a href="#tabLeaveRequest" data-toggle="tab">Compensation</a></li>
                                        <li><a href="#tabLeaveBalence" data-toggle="tab">Accrued Leave Detail</a></li>
                                    </ul>
                                    <div class="tab-content" id="maintab">
                                        <div class="active tab-pane" id="tabLeaveRequest">
                                            <h:panelGroup id="pngLeaveRequest">  
                                                <section class="panel panel-info" id="pnl1">
                                                    <section class="panel-body">

                                                        <div class="col-md-6">
                                                            <div class="col-md-12 textBoxMargin6px ">
                                                                <div class="form-group form-horizontal">   
                                                                    <label for="txtEmpID" class="control-label col-sm-4" >Employee Id:</label>
                                                                    <div class="col-sm-8">
                                                                        <p:autoComplete   id="txtEmpID" placeholder="Enter Your ID Here" value="#{compensationController.employee.empId}" 
                                                                                          emptyMessage="Employee not exit"     maxResults="10"      style="width: 100%"  
                                                                                          completeMethod="#{compensationController.searchEmployee}" required="true"
                                                                                          var="emp" itemValue="#{emp.empId}" itemLabel="#{emp}"   >
                                                                            <p:column headerText="ID"  >
                                                                                <h:outputText value="#{emp.empId}" />
                                                                            </p:column>
                                                                            <p:column headerText="First Name" >
                                                                                <h:outputText  value="#{emp.firstName}" />
                                                                            </p:column>
                                                                            <p:column  headerText="Middle Name">
                                                                                <h:outputText value="#{emp.middleName}" />
                                                                            </p:column>
                                                                            <p:ajax  event="itemSelect" listener="#{compensationController.getEmployeeInfo}" process="@this" 
                                                                                     update="@this,txtExprience,texDesc,btnSave1,txtFirstName,txtMiddleName,txtLastName,txtdpt,txtPosition,txtsal,txtleavedays,txtAccuedL,txtsev,txtcom,tblleaveBalance2" /> 
                                                                        </p:autoComplete> 
                                                                        <p:message for="txtEmpID" display="icon"/>  
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-12 textBoxMargin6px ">
                                                                <div class="form-group form-horizontal">  
                                                                    <label for="txtFirstName" class="control-label col-sm-4" >First Name:</label>
                                                                    <div class="col-sm-8"> 
                                                                        <p:inputText id="txtFirstName" value="#{compensationController.employee.firstName}"  readonly="true" class="form-control"/>
                                                                        <p:message for="txtFirstName" display="icon"/>
                                                                    </div>
                                                                </div>
                                                            </div>



                                                            <div class="col-md-12 textBoxMargin6px ">
                                                                <div class="form-group form-horizontal">   
                                                                    <label for="txtMiddleName" class="control-label col-sm-4" >Middle Name:</label>
                                                                    <div class="col-sm-8"> 
                                                                        <p:inputText id="txtMiddleName" value="#{compensationController.employee.middleName}"  readonly="true" class="form-control"
                                                                                     /> 
                                                                        <p:message for="txtMiddleName" display="icon"/>
                                                                    </div>
                                                                </div>
                                                            </div>


                                                            <div class="col-md-12 textBoxMargin6px ">
                                                                <div class="form-group form-horizontal">   
                                                                    <label for="txtLastName" class="control-label col-sm-4" >Last Name:</label>
                                                                    <div class="col-sm-8"> 
                                                                        <p:inputText id="txtLastName" value="#{compensationController.employee.lastName}"  readonly="true" class="form-control"/>
                                                                        <p:message for="txtLastName" display="icon"/>
                                                                    </div>
                                                                </div>
                                                            </div>


                                                            <div class="col-md-12 textBoxMargin6px ">
                                                                <div class="form-group form-horizontal">   
                                                                    <label for="txtExprience" class="control-label col-sm-4" >Experience :</label>
                                                                    <div class="col-sm-8">
                                                                        <p:inputText id ="txtExprience"  value="#{compensationController.exprience}" style="width: 100%" 
                                                                                     readonly="true" >

                                                                        </p:inputText>                  
                                                                        <p:message for="txtExprience" display="icon"/>  
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="col-md-12 textBoxMargin6px ">
                                                                <div class="form-group form-horizontal">   
                                                                    <label for="txtxPdate" class="control-label col-sm-4" >Process Date:</label>
                                                                    <div class="col-sm-8">
                                                                        <p:inputText id ="txtxPdate" onclick="displayCalendar('frmCompReq:txtxreqdate', 'frmNeedRequest:txtxreqdate');" 
                                                                                     required="true"  requiredMessage="select Process date"
                                                                                     value="#{compensationController.today}" style="width: 100%" 
                                                                                     >

                                                                        </p:inputText>                  
                                                                        <p:message for="txtxPdate" display="icon"/>  
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="col-md-12 textBoxMargin6px ">
                                                                <div class="form-group form-horizontal">   
                                                                    <p:outputLabel class="control-label col-sm-4" value="Remark:"/>
                                                                    <div class="col-sm-8"> 
                                                                        <p:inputTextarea id="texDesc" value="#{compensationController.hrEmployeeCompensation.remark}"
                                                                                         class="form-control" rows="1" cols="5" autoResize="false" />  
                                                                        <p:message for="texDesc" display="icon"/>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                             <div class="col-md-12 textBoxMargin6px  ">
                                                                <div class="form-group form-horizontal">   
                                                                    <p:outputLabel class="control-label col-sm-4" value=""/>
                                                                    
                                                                </div>
                                                            </div>
                                                            
                                                            <div class="col-md-12 textBoxMargin6px  ">
                                                                <div class="form-group form-horizontal">   
                                                                    <p:outputLabel class="control-label col-sm-4" value=""/>
                                                                    <div class="col-sm-2">
                                                                            <p:commandButton id="btnSave1" class="btn  btn-block btn-primary col-lg-4"  value="Save" 
                                                                                             action="#{compensationController.saveCompensation}" disabled="#{compensationController.renderSave}"
                                                                                             process="@this,pngLeaveRequest" update="@this,:frmCompReq,growl"/> 
                                                                        </div>
                                                                </div>
                                                            </div>
                                                            
                                                            





                                                        </div>
                                                        <div class="col-md-6">
                                                            <div class="col-md-12 textBoxMargin6px ">
                                                                <div class="form-group form-horizontal">   
                                                                    <label for="txtdpt" class="control-label col-sm-4" >Department:</label>
                                                                    <div class="col-sm-8"> 
                                                                        <p:inputText id="txtdpt" value="#{compensationController.employee.deptId.depName}" required="true" class="form-control"
                                                                                     > 

                                                                        </p:inputText>
                                                                        <p:message for="txtdpt" display="icon"/>
                                                                    </div>
                                                                </div>
                                                            </div>



                                                            <div class="col-md-12 textBoxMargin6px ">
                                                                <div class="form-group form-horizontal">   
                                                                    <label for="txtPosition" class="control-label col-sm-4" >Position:</label>
                                                                    <div class="col-sm-8"> 

                                                                        <p:inputText id="txtPosition" value="#{compensationController.employee.jobId.jobTitle}" class="form-control"
                                                                                     readonly="true" />
                                                                        <p:message for="txtPosition" display="icon"/>

                                                                    </div>
                                                                </div>
                                                            </div>


                                                            <div class="col-md-12 textBoxMargin6px ">
                                                                <div class="form-group form-horizontal">   
                                                                    <label for="txtsal" class="control-label col-sm-4" >Salary:</label>
                                                                    <div class="col-sm-8"> 
                                                                        <p:inputText id="txtsal" value="#{compensationController.employee.basicSalary}" class="form-control"
                                                                                     readonly="true" />
                                                                        <p:message for="txtsal" display="icon"/>
                                                                        <p:message for="txtsal" display="icon"/>
                                                                    </div>
                                                                </div>
                                                            </div>



                                                            <div class="col-md-12 textBoxMargin6px ">
                                                                <div class="form-group form-horizontal">   
                                                                    <label for="txtleavedays" class="control-label col-sm-4" >Accrued Leave Days:</label>
                                                                    <div class="col-sm-8"> 
                                                                        <p:inputText id="txtleavedays" value="#{compensationController.hrEmployeeCompensation.accruedLeaveDays}" class="form-control"  
                                                                                     readonly="true" />                                       
                                                                        <p:message for="txtleavedays" display="icon"/>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-12 textBoxMargin6px ">
                                                                <div class="form-group form-horizontal">   
                                                                    <label for="txtAccuedL" class="control-label col-sm-4" >Accrued Leave(In Birr) :</label>
                                                                    <div class="col-sm-8">
                                                                        <p:inputText id ="txtAccuedL"  value="#{compensationController.hrEmployeeCompensation.accruedLeaveInBirr}" style="width: 100%" 
                                                                                     readonly="true" >

                                                                        </p:inputText>                  
                                                                        <p:message for="txtAccuedL" display="icon"/>  
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-12 textBoxMargin6px ">
                                                                <div class="form-group form-horizontal">   
                                                                    <label for="txtsev" class="control-label col-sm-4" >Severance Amount :</label>
                                                                    <div class="col-sm-8">
                                                                        <p:inputText id ="txtsev"  value="#{compensationController.hrEmployeeCompensation.severanceAmount}" style="width: 100%" 
                                                                                     readonly="true" >

                                                                        </p:inputText>                  
                                                                        <p:message for="txtsev" display="icon"/>  
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-12 textBoxMargin6px ">
                                                                <div class="form-group form-horizontal">   
                                                                    <label for="txtcom" class="control-label col-sm-4" >Compensation Amount :</label>
                                                                    <div class="col-sm-8">
                                                                        <p:inputText id ="txtcom"  value="#{compensationController.hrEmployeeCompensation.compensationAmount}" style="width: 100%" 
                                                                                     readonly="true" >

                                                                        </p:inputText>                  
                                                                        <p:message for="txtcom" display="icon"/>  
                                                                    </div>
                                                                </div>
                                                            </div>


                                                        </div>

                                                    </section> 
                                                    
                                                </section>

                                                   
                                                
                                            </h:panelGroup>



                                        </div>

                                        <div class=" tab-pane" id="tabLeaveBalence">   

                                            <h:panelGroup id="pnlLeaveBalance">
                                                <div class="col-sm-12">
                                                    <div class="col-sm-6"> 
                                                        <div class="form-horizontal col-md-12">
                                                            <div class="form-group">
                                                                <h:outputLabel  value="" class="control-label col-sm-4"/>
                                                                <div class="col-sm-8"> 
                                                                   

                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                      <p:dataTable id="tblleaveBalance2" var="balanceInfo" rows="3" 
                                                                   rowIndexVar="Det" value="#{compensationController.balanceDataModel}" 
                                                                   class="dataTable"    
                                                                   paginator="true" paginatorPosition="bottom"
                                                                   paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                                   rowsPerPageTemplate="5,10,15"    >
                                                    <p:column  headerText="NO">
                                                                <h:outputText  value="#{Det+1}"/>
                                                    </p:column> 
                                                        
                                                        <p:column headerText="Leave Year">
                                                                <h:outputText value="#{balanceInfo.leaveYearId.budgetYear}"/>
                                                         </p:column>
                                                    <p:column headerText="Total Days">
                                                               <h:outputText value="#{balanceInfo.totalDays}"/>
                                                    </p:column>                                 
                                                    <p:column headerText="Remaining Days">
                                                                  <h:outputText value="#{balanceInfo.remainingDays}"/>
                                                    </p:column>
                                                        <p:summaryRow>
                                                        <p:column colspan="2" style="text-align:right">
                                                            <h:outputText value="Allowed Leave days:" />
                                                        </p:column>
                                                        <p:column>
                                                            <h:outputText value="#{leaveRequest.totalLeaveDays}">                                                                
                                                            </h:outputText>
                                                        </p:column>
                                                    </p:summaryRow>
                                                </p:dataTable>
                                            </h:panelGroup>
                                        </div>    
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </h:panelGroup>
        </h:form>

    </ui:define>
</ui:composition>
